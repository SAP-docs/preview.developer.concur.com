<!DOCTYPE html>
<html lang="en">

<head>
  


  <title> SAP Concur Developer Center | Oauth2 Migration Best Practices</title>


<!-- Meta -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="The starting point for anyone interested in building anything with the Concur platform that reaches 45 million business travelers.">
<meta name="author" content="">


  <meta name="robots" content="noindex">


<!-- Sitemap link -->
<link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml" />

<!-- Favicon -->
<link rel="shortcut icon" href="/assets/img/concur_favicon.ico" type="image/png">

<!-- Canonical link-->
<link rel="canonical" href="https://preview.developer.concur.com/api-reference/authentication/oauth2-migration-best-practices.html" data-proofer-ignore>

<!-- CSS Global Compulsory -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400">
<link rel="stylesheet" href="/assets/style.css">

<!-- CSS Implementing Plugins -->
<link rel="stylesheet" href="/assets/plugins/font-awesome/css/all.min.css">



<link rel="alternate" type="application/rss+xml" title="SAP Concur Developer Center RSS" href="/feed.xml" />


</head>

<body>


  <div class="wrapper page-option-v1">
    <div class="hidden-print">
  <nav id="header-navbar" class="navbar navbar-inverse hidden-print">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header col-6">
        <button type="button" class="navbar-toggle collapsed" style="color: white" data-toggle="collapse" data-target="#nav-collapse-1" aria-expanded="false">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/">
          <img src="/assets/img/concur_logo_white_gold.png" alt="Logo">
          <div class="app-name">Developer Center</div>
        </a>
      </div>
      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse col-6" id="nav-collapse-1">
        <ul class="nav navbar-nav navbar-right" style="padding-top: 9px">
          <!-- Development -->
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" style="color: white" role="button" aria-haspopup="true">
              Development <span class="caret"></span>
            </a>
            <ul class="dropdown-menu multi-column three-column-menu">
              <div class="row">
                <div class="col-sm-4">
                  <ul class="multi-column-dropdown">
                    <li class="column-icon">
                      <span class="fa-stack fa-lg">
                        <i class="fas fa-circle fa-stack-2x"></i>
                        <i class="fas fa-map-marked-alt fa-stack-1x fa-inverse"></i>
                      </span>
                    </li>
                    <li class="column-title">About</li>
                    <li><a href="/getting-started.html">Getting Started</a></li>
                    <li><a href="/api-reference/authentication/getting-started.html">Authentication</a></li>
                    <li><a href="/platform/index.html">Platform</a></li>
                    <li><a href="/tools-support/deprecation-policy.html">API Deprecation</a></li>
                  </ul>
                </div>
                <div class="col-sm-4">
                  <ul class="multi-column-dropdown">
                    <li class="column-icon">
                      <span class="fa-stack fa-lg">
                        <i class="fas fa-circle fa-stack-2x"></i>
                        <i class="fas fa-book fa-stack-1x fa-inverse"></i>
                      </span>
                    </li>
                    <li class="column-title">Documentation</li>
                    <li><a href="/api-reference/">API Reference</a></li>
                    <li><a href="/api-explorer/">API Explorer</a></li>
                    <li><a href="/api-guides/">API Guides</a></li>
                  </ul>
                </div>
                <div class="col-sm-4">
                  <ul class="multi-column-dropdown">
                    <li class="column-icon">
                      <span class="fa-stack fa-lg">
                        <i class="fas fa-circle fa-stack-2x"></i>
                        <i class="fas fa-clipboard-list fa-stack-1x fa-inverse"></i>
                      </span>
                    </li>
                    <li class="column-title">UX Guidelines</li>
                    <li><a href="/manage-apps/go-market-docs/app-center-ux-guidelines-enterprise.html">Enterprise Applications</a></li>
                    <li><a href="/manage-apps/go-market-docs/app-center-ux-guidelines-consumer.html">User Connections</a>
                    </li>
                  </ul>
                </div>
              </div>
            </ul>
          </li>
          <!-- Partner Resources -->
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" style="color: white" aria-haspopup="true" aria-expanded="false">
              Partner Resources <span class="caret"></span>
            </a>
            <ul class="dropdown-menu">
              <li class="column-icon">
                <span class="fa-stack fa-lg">
                  <i class="fas fa-circle fa-stack-2x"></i>
                  <i class="fas fa-lightbulb fa-stack-1x fa-inverse"></i>
                </span>
              </li>
              <li class="column-title">Partner Resources</li>
              <li><a href="/manage-apps/app-certification.html">App Certification</a></li>
              <li><a href="/manage-apps/partner-applications.html">App Registration & Management</a></li>
              <li><a href="/manage-apps/redirect.html">Go to Market</a></li>
              <li><a href="https://www.concur.com/en-us/app-center" target="_blank">App Center</a></li>
              <li><a href="https://www.concursolutions.com/" target="_blank">Login to Concur</a></li>
            </ul>
          </li>
          <!-- Support -->
          <li
            class="dropdown">
            <a href="#" class="dropdown-toggle" style="color: white" data-toggle="dropdown" role="button" aria-haspopup="true">
              Support <span class="caret"></span>
            </a>
            <ul class="dropdown-menu multi-column two-column-menu">
              <div class="row">
                <div class="col-sm-6">
                  <ul class="multi-column-dropdown">
                    <li class="column-icon">
                      <span class="fa-stack fa-lg">
                        <i class="fas fa-circle fa-stack-2x"></i>
                        <i class="fas fa-question fa-stack-1x fa-inverse"></i>
                      </span>
                    </li>
                    <li class="column-title">Support</li>
                    <li><a href="/tools-support/support.html">Support Options</a></li>
                    <li><a href="https://open.concur.com/" target="_blank">Service Status</a></li>
                  </ul>
                </div>
                <div class="col-sm-6">
                  <ul class="multi-column-dropdown">
                    <li class="column-icon">
                      <span class="fa-stack fa-lg">
                        <i class="fas fa-circle fa-stack-2x"></i>
                        <i class="fas fa-bullhorn fa-stack-1x fa-inverse"></i>
                      </span>
                    </li>
                    <li class="column-title">Bulletin</li>
                    <li><a href="/announcements/index.html">Announcements</a></li>
                    <li><a href="/tools-support/release-notes/index.html">Release Notes</a></li>
                  </ul>
                </div>
              </div>
            </ul>
          </li>
          <!-- Search -->
          <li>
            <a href="#" class="search">
              <span class="sr-only">Search</span>
              <i class="fas fa-search search-btn" style="color:white;"></i>
            </a>
            <div class="search-open">
              <div class="input-group animated fadeInDown">
                <form method="GET" action="/search.html" id="searchbox_000165422556797149853:qlbg8re_3tu">
                  <input value="000165422556797149853:qlbg8re_3tu" name="cx" type="hidden">
                  <input value="FORID:11" name="cof" type="hidden"> <!-- FORID values configure ad positions -->
                  <div class="input-group">
                    <label for="q" hidden>Search</label>
                    <input type="text" id="q" class="form-control" name="q" placeholder="Search">
                    <span class="input-group-btn">
                      <button type="submit" class="btn bright-blue">Go</button>
                    </span>
                  </div>
                </form>
              </div>
            </div>
          </li>
        </ul> <!-- /.navbar-nav -->
      </div> <!-- /.navbar-collapse -->
  </nav> <!-- /.navbar -->
</div>


    <div id="main-content"
         class="main-content">
      <div class="container-fluid content">
  <div class="row">
    <div id="left-navigation"
         class="col-md-2 left-navigation">
      







<ul class="list-group sidebar-nav-v1 hidden-print" id="sidebar-nav">





  
    <li class="list-group-item ">
      <a href="/api-reference/">API Reference</a>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle active">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-authentication">
        Authentication
      </a>
      <ul id="collapse-authentication" class="collapse in">
        
          <li >
            <a href="/api-reference/authentication/getting-started.html">Getting Started</a>
          </li>
        
          <li >
            <a href="/api-reference/authentication/apidoc.html">Authentication</a>
          </li>
        
          <li >
            <a href="/api-reference/authentication/company-auth.html">Company Level Authentication</a>
          </li>
        
          <li >
            <a href="/api-reference/authentication/migrationguide.html">Migrating to Oauth2 Tokens</a>
          </li>
        
          <li  class="active" >
            <a href="/api-reference/authentication/oauth2-migration-best-practices.html">Oauth2 Migration Best Practices</a>
          </li>
        
          <li >
            <a href="/api-reference/authentication/scopes.html">Scopes</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-budget-v4">
        Budget v4
      </a>
      <ul id="collapse-budget-v4" class="collapse ">
        
          <li >
            <a href="/api-reference/budget/getting-started.html">Getting Started</a>
          </li>
        
          <li >
            <a href="/api-reference/budget/v4.fiscal-year.html">Fiscal Year</a>
          </li>
        
          <li >
            <a href="/api-reference/budget/v4.budget-category.html">Budget Category</a>
          </li>
        
          <li >
            <a href="/api-reference/budget/v4.budget-header.html">Budget Item</a>
          </li>
        
          <li >
            <a href="/api-reference/budget/v4.budget-trackingfield.html">Budget Tracking Field</a>
          </li>
        
          <li >
            <a href="/api-reference/budget/v4.budget-adjustments.html">Budget Adjustments</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-callouts">
        Callouts
      </a>
      <ul id="collapse-callouts" class="collapse ">
        
          <li >
            <a href="/api-reference/callouts/callouts-application-connectors.html">Callouts and Application Connectors</a>
          </li>
        
          <li >
            <a href="/api-reference/callouts/delete-notification.html">Delete notification requests</a>
          </li>
        
          <li >
            <a href="/api-reference/callouts/event-notification.html">Event Notification Callout</a>
          </li>
        
          <li >
            <a href="/api-reference/callouts/fetch-attendee.html">Fetch Attendee Version 2 Callout</a>
          </li>
        
          <li >
            <a href="/api-reference/callouts/fetch-list.html">Fetch List Callout</a>
          </li>
        
          <li >
            <a href="/api-reference/callouts/get-notifications-status.html">Get notifications by status</a>
          </li>
        
          <li >
            <a href="/api-reference/callouts/launch-external-url-request.html">Launch an external URL request v1</a>
          </li>
        
          <li >
            <a href="/api-reference/callouts/launch-external-url.html">Launch External URL Callout v1</a>
          </li>
        
          <li >
            <a href="/api-reference/callouts/v4.launch-external-url.html">Launch External URL v4</a>
          </li>
        
          <li >
            <a href="/api-reference/callouts/post-event-notification.html">Post an event notification request</a>
          </li>
        
          <li >
            <a href="/api-reference/callouts/post-fetch-attendee.html">Post an attendee search request</a>
          </li>
        
          <li >
            <a href="/api-reference/callouts/post-list-search-request.html">Post a list search request</a>
          </li>
        
          <li >
            <a href="/api-reference/callouts/request-validation.html">Travel Request Validation</a>
          </li>
        
      </ul>
    </li>

  



  
    <li class="list-group-item ">
      <a href="/api-reference/cash-advance/v4.cash-advance.html">Cash Advance v4</a>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-common">
        Common
      </a>
      <ul id="collapse-common" class="collapse ">
        
          <li >
            <a href="/api-reference/common/connection-requests/connection-requests-resource.html">Connection Requests v3.2</a>
          </li>
        
          <li >
            <a href="/api-reference/common/extracts/v1.extracts.html">Extracts v1</a>
          </li>
        
          <li >
            <a href="/api-reference/common/lists/v4.list.html">List v4</a>
          </li>
        
          <li >
            <a href="/api-reference/common/list-item/v4.list-item.html">List Item v4</a>
          </li>
        
          <li >
            <a href="/api-reference/common/locations/v3.locations.html">Locations v3</a>
          </li>
        
          <li >
            <a href="/api-reference/common/suppliers/suppliers-resource.html">Suppliers v3</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-direct-connect-ground-transportation-v1">
        Direct Connect - Ground Transportation v1
      </a>
      <ul id="collapse-direct-connect-ground-transportation-v1" class="collapse ">
        
          <li >
            <a href="/api-reference/direct-connects/ground-transportation.html">Ground Transportation Direct Connect</a>
          </li>
        
          <li >
            <a href="/api-reference/direct-connects/ground-transportation/cancel-reservation.html">Cancel a reservation</a>
          </li>
        
          <li >
            <a href="/api-reference/direct-connects/ground-transportation/post-reservation-detail-search.html">Post a reservation detail search</a>
          </li>
        
          <li >
            <a href="/api-reference/direct-connects/ground-transportation/post-reservation-sell.html">Post a reservation sell request</a>
          </li>
        
          <li >
            <a href="/api-reference/direct-connects/ground-transportation/post-transportation-search.html">Post a transportation search</a>
          </li>
        
          <li >
            <a href="/api-reference/direct-connects/ground-transportation/update-reservation-supplier.html">Update reservation with supplier</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-direct-connect-hotel-v2">
        Direct Connect - Hotel v2
      </a>
      <ul id="collapse-direct-connect-hotel-v2" class="collapse ">
        
          <li >
            <a href="/api-reference/direct-connects/hotel-service-2/Introduction.html">Introduction</a>
          </li>
        
          <li >
            <a href="/api-reference/direct-connects/hotel-service-2/Use-cases.html">Use-cases</a>
          </li>
        
          <li >
            <a href="/api-reference/direct-connects/hotel-service-2/Headers.html">Headers</a>
          </li>
        
          <li >
            <a href="/api-reference/direct-connects/hotel-service-2/Error-handling.html">Error Handling</a>
          </li>
        
          <li >
            <a href="/api-reference/direct-connects/hotel-service-2/Search.html">Search</a>
          </li>
        
          <li >
            <a href="/api-reference/direct-connects/hotel-service-2/Availability.html">Availability</a>
          </li>
        
          <li >
            <a href="/api-reference/direct-connects/hotel-service-2/Descriptive-info.html">Descriptive Information</a>
          </li>
        
          <li >
            <a href="/api-reference/direct-connects/hotel-service-2/Rate-details.html">Rate Details</a>
          </li>
        
          <li >
            <a href="/api-reference/direct-connects/hotel-service-2/Reservation.html">Reservation</a>
          </li>
        
          <li >
            <a href="/api-reference/direct-connects/hotel-service-2/Read-Itinerary.html">Read Itinerary</a>
          </li>
        
          <li >
            <a href="/api-reference/direct-connects/hotel-service-2/Cancel.html">Cancel</a>
          </li>
        
          <li >
            <a href="/api-reference/direct-connects/hotel-service-2/V-payment.html">Virtual Payment</a>
          </li>
        
          <li >
            <a href="/api-reference/direct-connects/hotel-service-2/Appendix.html">Appendix</a>
          </li>
        
          <li >
            <a href="/api-reference/direct-connects/hotel-service-2/xsd-schema.html">XSD-schema</a>
          </li>
        
      </ul>
    </li>

  



  
    <li class="list-group-item ">
      <a href="/api-reference/ess/v4.event-subscription.html">Event Subscription Service v4</a>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-expense">
        Expense
      </a>
      <ul id="collapse-expense" class="collapse ">
        
          <li >
            <a href="/api-reference/expense/allocations/expense-allocations.html">Allocations v3</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/expense-report/v4.allocations.html">Allocations v4</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/attendee-types/v3.attendee-types.html">Attendee Types v3</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/attendees/v3.attendees.html">Attendees v3</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/digital-tax-invoices/digital-tax-invoice.html">Digital Tax Invoices v3</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/expense-report/v4.comments.html">Comments v4</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/expense-report/company-card-transaction-resource.html">Company Card Transactions v1.1</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/exchange-rate/v4.exchange-rate.html">Exchange Rate v4</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/expense-report/expense-delegators.html">Expense Delegators v1.1</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/expense-report/v3.expense-entry-attendee.html">Entry Attendee Associations v3</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/expense-report/expense-entry.html">Entries v3</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/expense-report/v4.expenses.html">Expenses v4</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/expense-report/expense-form-field.html">Expense Form Field v1.1</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/expense-report/expense-form.html">Expense Form v1.1</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/expense-report/expense-group-configurations.html">Expense Group Configurations v3</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/expense-report/expense-itemization.html">Itemizations v3</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/expense-report/integration-status.html">Integration Status</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/expense-report/post-report-exceptions.html">Create an exception to a report</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/expense-report/post-report-submission.html">Submit an expense report</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/expense-report/post-report-workflow-action.html">Post an expense report workflow action</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/expense-report/v3.reports.html">Reports v3</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/expense-report/v4.reports.html">Reports v4</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/expense-report/expense-report-get.html">Report Details</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/payment-batch/v1.payment-batches.html">Payment Batches v1.1</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/quick-expense/v4.quick-expense.html">Quick Expense v4</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-financial-integration-service-v4">
        Financial Integration Service v4
      </a>
      <ul id="collapse-financial-integration-service-v4" class="collapse ">
        
          <li >
            <a href="/api-reference/financial-integration/v4.financial-integration.html">Getting Started</a>
          </li>
        
          <li >
            <a href="/api-reference/financial-integration/v4.financial-integration-service-use-cases.html">Use Cases</a>
          </li>
        
          <li >
            <a href="/api-reference/financial-integration/v4.financial-integration-use-cases-extract-information.html">Use Cases Extract Information</a>
          </li>
        
          <li >
            <a href="/api-reference/financial-integration/v4.financial-documents-schema.html">Schemas</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-insights">
        Insights
      </a>
      <ul id="collapse-insights" class="collapse ">
        
          <li >
            <a href="/api-reference/insights/latest-bookings-resource.html">Latest Bookings</a>
          </li>
        
          <li >
            <a href="/api-reference/insights/opportunities-resource.html">Opportunities</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-invoice">
        Invoice
      </a>
      <ul id="collapse-invoice" class="collapse ">
        
          <li >
            <a href="/api-reference/invoice/v3.payment-request-digest.html">Retrieve Invoice Digests v3</a>
          </li>
        
          <li >
            <a href="/api-reference/invoice/v3.payment-request.html">Invoice v3</a>
          </li>
        
          <li >
            <a href="/api-reference/invoice/v4.invoice-pay.html">Invoice Pay v4</a>
          </li>
        
          <li >
            <a href="/api-reference/invoice/v3.purchase-order.html">Purchase Orders v3</a>
          </li>
        
          <li >
            <a href="/api-reference/invoice/v4.purchase-request-get-started.html">Purchase Request v4 - Get Started</a>
          </li>
        
          <li >
            <a href="/api-reference/invoice/v4.purchase-request-endpoints.html">Purchase Request v4 - Endpoints</a>
          </li>
        
          <li >
            <a href="/api-reference/invoice/v3.purchase-order-receipt.html">Purchase Orders Receipt v3</a>
          </li>
        
          <li >
            <a href="/api-reference/invoice/v3.sales-tax-validation.html">Sales Tax Validation v3</a>
          </li>
        
          <li >
            <a href="/api-reference/invoice/v3.vendor.html">Vendor v3</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-receipts">
        Receipts
      </a>
      <ul id="collapse-receipts" class="collapse ">
        
          <li >
            <a href="/api-reference/receipts/get-started.html">Get Started</a>
          </li>
        
          <li >
            <a href="/api-reference/receipts/endpoints.html">Endpoints</a>
          </li>
        
          <li >
            <a href="/api-reference/receipts/supported-receipt-types.html">Supported Receipt Types</a>
          </li>
        
          <li >
            <a href="/api-reference/receipts/sample-receipts.html">Sample Receipts</a>
          </li>
        
          <li >
            <a href="/api-reference/receipts/response-codes.html">Response Codes</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-receipt-image">
        Receipt Image
      </a>
      <ul id="collapse-receipt-image" class="collapse ">
        
          <li >
            <a href="/api-reference/image/v1.image.html">Image v1</a>
          </li>
        
          <li >
            <a href="/api-reference/image/v3.image.html">Image v3</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-request-v4">
        Request v4
      </a>
      <ul id="collapse-request-v4" class="collapse ">
        
          <li >
            <a href="/api-reference/request/v4.get-started.html">Getting Started</a>
          </li>
        
          <li >
            <a href="/api-reference/request/v4.endpoints.request-resources.html">Request</a>
          </li>
        
          <li >
            <a href="/api-reference/request/v4.endpoints.workflow-resources.html">Workflow</a>
          </li>
        
          <li >
            <a href="/api-reference/request/v4.endpoints.expected-expense-resources.html">Expected Expense</a>
          </li>
        
          <li >
            <a href="/api-reference/request/v4.endpoints.cashadvance-resources.html">Request Cash Advance</a>
          </li>
        
          <li >
            <a href="/api-reference/request/v4.endpoints.policy-resources.html">Request Policy</a>
          </li>
        
          <li >
            <a href="/api-reference/request/v4.endpoints.travel-agency-resources.html">Travel Agency</a>
          </li>
        
          <li >
            <a href="/api-reference/request/v4.endpoints.schemas.html">Schema</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-travel-profile">
        Travel Profile
      </a>
      <ul id="collapse-travel-profile" class="collapse ">
        
          <li >
            <a href="/api-reference/travel-profile/v2.profile-service.html">Travel Profile v2</a>
          </li>
        
          <li >
            <a href="/api-reference/travel-profile/v2.profile-resource.html">Travel Profile v2 - Resource</a>
          </li>
        
          <li >
            <a href="/api-reference/travel-profile/v1.loyalty-program-resource.html">Travel Profile v1 - Loyalty Program</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-travel">
        Travel
      </a>
      <ul id="collapse-travel" class="collapse ">
        
          <li >
            <a href="/api-reference/travel/travel.html">Travel Services</a>
          </li>
        
          <li >
            <a href="/api-reference/travel/itinerary/itinerary.html">Itinerary v1 – Getting Started</a>
          </li>
        
          <li >
            <a href="/api-reference/travel/itinerary-tmc-thirdparty/index.html">Itinerary v1 Usage</a>
          </li>
        
          <li >
            <a href="/api-reference/travel/itinerary/trip/trip-resource.html">Trip v1.1</a>
          </li>
        
          <li >
            <a href="/api-reference/travel/itinerary/booking/booking-resource.html">Booking v1.1</a>
          </li>
        
          <li >
            <a href="/api-reference/travel/itinerary-v4/v4.itinerary.html">Itinerary v4</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-user">
        User
      </a>
      <ul id="collapse-user" class="collapse ">
        
          <li >
            <a href="/api-reference/user/index.html">User v1</a>
          </li>
        
          <li >
            <a href="/api-reference/profile/v4.identity.html">Identity v4</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-general">
        General
      </a>
      <ul id="collapse-general" class="collapse ">
        
          <li >
            <a href="/api-reference/http-status-codes.html">HTTP Status Codes</a>
          </li>
        
          <li >
            <a href="/api-reference/locale-codes.html">Locale Codes</a>
          </li>
        
          <li >
            <a href="/api-reference/spend-category-codes.html">Spend Category Codes</a>
          </li>
        
          <li >
            <a href="/api-reference/deprecated.html">Deprecated</a>
          </li>
        
      </ul>
    </li>

  



</ul>

    </div>
    <!--/col-md-3-->

    
      <div id="markdown-body"
           class="col-md-8 markdown-body">
        

        <h1 id="oauth2-migration-best-practices">OAuth2 Migration Best Practices</h1>

<h2 id="old-world-authentication-">Old World Authentication <a name="old-authentication"></a></h2>

<ul>
  <li>The old world authentication is a hybrid oauth2 implementation which has an endpoint that looks like this <code class="language-plaintext highlighter-rouge">/net2/oauth2/</code></li>
  <li>Client applications are identified by a <code class="language-plaintext highlighter-rouge">ConsumerKey</code> and <code class="language-plaintext highlighter-rouge">Secret</code> pair. Sometimes these are referred to as <code class="language-plaintext highlighter-rouge">client_id</code> and <code class="language-plaintext highlighter-rouge">client_secret</code>.</li>
  <li>Access Tokens in the old world have a 12 months expiry period and refresh tokens live forever. This is typically not a good security practice and goes against the Oauth2 standards.</li>
  <li>Tokens that are being used by clients today are issued for WSADMINs, meaning all tokens have administrative access.</li>
</ul>

<h2 id="new-world-authentication-">New World Authentication <a name="new-authentication"></a></h2>

<h3 id="oauth2"><a name="oauth2"></a>Oauth2</h3>
<ul>
  <li>The SAP Concur new Oauth2 implementation follows the established Oauth2 Authorization Framework RFC : https://tools.ietf.org/html/rfc6749</li>
  <li>This new service has an endpoint of <code class="language-plaintext highlighter-rouge">/oauth2/v0/token</code></li>
  <li>Unlike the old world auth, access tokens have a 1 hour expiry and refresh tokens have a 6 months expiry. This is in accordance to the best practice of using short lived tokens.</li>
  <li>This would mean that clients would need to perform token management.</li>
</ul>

<h3 id="getting-started"><a name="getting-started"></a>Getting Started</h3>
<ul>
  <li>Getting clientID / clientSecret
    <ul>
      <li>Work with the SAP Concur implementation team to obtain a new oauth2 <code class="language-plaintext highlighter-rouge">client_id</code> and <code class="language-plaintext highlighter-rouge">client_secret</code> and to define the scope of client’s application.</li>
      <li>Process will take no longer than 48 hours.</li>
      <li>Implementation Team will respond with new <code class="language-plaintext highlighter-rouge">client_id</code>, <code class="language-plaintext highlighter-rouge">client_secret</code>, company’s <code class="language-plaintext highlighter-rouge">refreshToken</code> and <code class="language-plaintext highlighter-rouge">expiry date</code>.</li>
      <li>Client stores and configures application with this info.</li>
    </ul>
  </li>
  <li>Client applications should store the following tokens and data in their application.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">Refresh Token</code>: This token can change although most of the time this value is the same. Client applications should treat all returned refresh tokens as new values and overwrite the stored values with the new values you get from the response.</li>
      <li><code class="language-plaintext highlighter-rouge">Refresh Token Expiry</code>: This date should be checked by a daily script and ensure that a refresh_grant is made to keep the refresh token alive indefinitely. If company policy dictates that the token should be allowed to expire, then you can skip this step. Once a refresh token has expired, clients would need to contact SAP Concur’s Implementation team to get a new company token.</li>
    </ul>
  </li>
</ul>

<h3 id="token-management"><a name="token-management"></a>Token Management</h3>
<ul>
  <li>Calling APIs with <code class="language-plaintext highlighter-rouge">accessTokens</code>
    <ul>
      <li>All APIs within SAP Concur require the calling application present an <code class="language-plaintext highlighter-rouge">accessToken</code> in the Header using the “Bearer” keyword.</li>
      <li>Example:
        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  curl -k -v -H "Accept: application/json" \
  -H "Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IjE0NTU2MTQzNDYifQ.eyJhdWQiOiIqIiwic3ViIjoiaHR0cDovL21zcGNzcHJzcnFhLmNvbmN1ci5jb25jdXJ0ZWNoLm9yZzozMDAzL3Byb2ZpbGUtc2VydmljZS92MS91c2Vycy83NjAwOUFEMy1GNzdCLTREOTgtQTIxQS01NTNDOUM5MTc5RjAiLCJpc3MiOiJodHRwczovL2NvbmN1ci5jb20iLCJleHAiOjE0NzM4OTUxMjksImxlZ2FjeV9hcHBsaWNhdGlvbl9pZCI6MTUwMDA2MzY1OSwidXNlclVSSSI6Imh0dHA6Ly9tc3Bjc3Byc3JxYS5jb25jdXIuY29uY3VydGVjaC5vcmc6MzAwMy9wcm9maWxlLXNlcnZpY2UvdjEvdXNlcnMvNzYwMDlBRDMtRjc3Qi00RDk4LUEyMUEtNTUzQzlDOTE3OUYwIiwidXNlcnV1aWQiOiI3NjAwOUFEMy1GNzdCLTREOTgtQTIxQS01NTNDOUM5MTc5RjAiLCJuYmYiOjE0NzM4OTE1MjksImh0dHBzOi8vYXBpLmNvbmN1cnNvbHV0aW9ucy5jb20vYXBwIjoiaHR0cHM6Ly9hcGkuY29uY3Vyc29sdXRpb25zLmNvbS9hcHAtbWdtdC92MC9hcHBzL2UwMTBlMjVkLWI0Y2UtNGNlMy1hN2U0LWI2NzBjYjFhZGNiMCIsImh0dHBzOi8vYXBpLmNvbmN1cnNvbHV0aW9ucy5jb20vc2NvcGVzIjpbIkNDQVJEIiwiQ09NUEQiLCJVU0VSIiwidXNlcl9yZWFkIiwiRU1FUkciLCJKT0JMT0ciLCJFUkVDUFQiLCJJVElORVIiLCJGSVNWQyIsIkxJU1QiLCJQQVNTViIsIkNPTkZJRyIsIkZPUCIsIkdIT1NUIiwiQ09OUkVRIiwiVFJJUElUIiwiQ09NUEFOWSIsInByb2ZpbGUiLCJFVlMiLCJlbWFpbCIsIlRSVlBUUyIsIkFUVEVORCIsIklOVlBPIiwiTk9USUYiLCJUUlZSRVEiLCJTVVBTVkMiLCJFWFBSUFQiLCJhZGRyZXNzIiwiRVhUUkNUIiwiUEFZQkFUIiwid3Jvbmdfc2NvcGUiLCJJTlZQTVQiLCJJTUFHRSIsIlRBWElOViIsIlJDVElNRyIsIlVOVVRYIiwiVFdTIiwiVE1DU1AiLCJCQU5LIiwiSU5WVkVOIiwib3BlbmlkIiwiTVRORyIsIklOU0dIVCIsIlRSVlBSRiIsIklOVlRWIiwiTUVESUMiLCJUU0FJIl0sImlhdCI6MTQ3Mzg5MTUyOX0.QHY4Mc5A3J981-HDv7KUdgS4tUI-qnmQAxwe9J6DHxuMmYSoGEYZ0dsnLnqc2lO2iVJK6Pg3EBZTArq8_vzV2FK7tA4-IT1eCEHo1e-RWZyWLnR7P56SvZozXpY73daovSH7572HrUm21FXcyLmdaLZyo2LfFcChaghbSCjm1Jg1duH-pLPUW4d89-_pdakmyxfV3GCm2N_XQXoRhNYAAiZcG8UfxEn3TpMHJ96F2n6keJanT_Sn2Sek_sH2EmeeCpg5-jDe0fvLvr1-gY5t0ifq8QBKWHSUUIrGbQvseD6CGzfyiFUqVypN2lukfWACR-26otN50c0OzY6kgY06RA" \
  https://us.api.concursolutions.com/profile/v1/me
</code></pre></div>        </div>
      </li>
      <li>More documentation here: <a href="https://developer.concur.com/api-reference/authentication/getting-started.html">https://developer.concur.com/api-reference/authentication/getting-started.html</a></li>
    </ul>
  </li>
  <li>Refreshing expired <code class="language-plaintext highlighter-rouge">accessTokens</code>
    <ul>
      <li>Since <code class="language-plaintext highlighter-rouge">accessTokens</code> have a one hour expiry, clients would need to get a new <code class="language-plaintext highlighter-rouge">accessToken</code> before any API call is made.</li>
      <li>In order to obtain a new <code class="language-plaintext highlighter-rouge">accessToken</code>, clients should call Oauth2 using the <code class="language-plaintext highlighter-rouge">refresh_grant</code> and providing the old <code class="language-plaintext highlighter-rouge">refreshToken</code> and other additional fields.</li>
      <li>
        <p>In the error handling code, clients need to handle <code class="language-plaintext highlighter-rouge">accessToken</code> expiry errors. If the <code class="language-plaintext highlighter-rouge">accessToken</code> is expired in the middle of processing, the following should happen:</p>

        <ul>
          <li>Code should call Oauth2’s <code class="language-plaintext highlighter-rouge">refresh_grant</code> to get a new <code class="language-plaintext highlighter-rouge">accessToken</code></li>
          <li>Overwrite the existing <code class="language-plaintext highlighter-rouge">refreshToken</code> with the new one.</li>
          <li>Update <code class="language-plaintext highlighter-rouge">expiry date</code> for <code class="language-plaintext highlighter-rouge">refreshToken</code></li>
          <li>Retry the API call.</li>
        </ul>
      </li>
      <li>More details about refreshing tokens here: <a href="https://developer.concur.com/api-reference/authentication/apidoc.html#refresh_token">https://developer.concur.com/api-reference/authentication/apidoc.html#refresh_token</a></li>
    </ul>
  </li>
  <li>Handling errors
    <ul>
      <li>There are a few error codes that client applications should be aware of.</li>
      <li><code class="language-plaintext highlighter-rouge">403 Forbidden</code>: Requesting for tokens for users who cannot be requested for. Usually for companies that are not authorized by their administrators.</li>
      <li>The bulk of errors will be returned as 400 errors and the response contains a <code class="language-plaintext highlighter-rouge">code</code> and <code class="language-plaintext highlighter-rouge">description</code>. Client applications should look for these values to determine what to do next.</li>
    </ul>

    <table>
      <thead>
        <tr>
          <th>Code</th>
          <th>Desc</th>
          <th>Comment</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>05</td>
          <td>Incorrect credentials.</td>
          <td>clientID / secret not correct, or authtoken/password not correct</td>
        </tr>
        <tr>
          <td>10</td>
          <td>Account is disabled</td>
          <td> </td>
        </tr>
        <tr>
          <td>14</td>
          <td>Account is locked</td>
          <td> </td>
        </tr>
        <tr>
          <td>16</td>
          <td>User lives elsewhere</td>
          <td>There will be a geolocation field in the response to this error message. Use this as the base URL and retry the call.</td>
        </tr>
        <tr>
          <td>54</td>
          <td>Invalid Scope</td>
          <td>requested scope exceeds what is permitted.</td>
        </tr>
      </tbody>
    </table>

    <ul>
      <li>for a full list, review this doc: <a href="https://developer.concur.com/api-reference/authentication/apidoc.html#response_codes">https://developer.concur.com/api-reference/authentication/apidoc.html#response_codes</a></li>
    </ul>
  </li>
</ul>

<h3 id="old-auth-vs-new-auth-diagram"><a name="old-v-new-diagram"></a>Old auth v.s. new auth diagram</h3>
<p><img src="./oldNewAuthComparion.png" alt="old v.s. new" /></p>

      </div>
      <!--/col-md-8-->
      
      <div id="markdown-toc"
           class="col-md-2 markdown-toc">
        <div class="markdown-toc-header">
    <h4>On this page</h4>
</div>
<div class="markdown-toc-content">
</div>

      </div>
      <!--/col-md-1-->
      
    </div>
    <!--/row-->
  </div>
  <!--/container-->

  <!-- TOCBOT -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.11.1/tocbot.min.js"></script>

<script>
  tocbot.init({
    // Where to render the table of contents.
    tocSelector: '.markdown-toc-content',
    // Where to grab the headings to build the table of contents.
    contentSelector: '.markdown-body',
    // Which headings to grab inside of the contentSelector element.
    headingSelector: 'h1, h2',
    // For headings inside relative or absolute positioned containers within content.
    hasInnerContainers: false,
  });
</script>


    </div>

    <footer class="hidden-print"
        id="footer">
  <div class="col-md-8 footer-copyright">
    <p>
      &copy;
      <script type="text/javascript">
        document.write(new Date().getFullYear());
      </script>
      All Rights Reserved.
      <a href="https://www.concur.com/en-us/privacy-policy">Privacy Policy</a> |
      <a href="/terms-of-use-2021.html">Terms of Use</a> |
      <a href="/tools-support/deprecation-policy.html">API Deprecation Policy</a> |
      <a href="https://github.com/SAP-docs/preview.developer.concur.com/blob/main/src/api-reference/authentication/oauth2-migration-best-practices.markdown">Edit this page on GitHub</a>
    </p>
  </div>

  <!-- Social Links -->
  <div class="col-md-4 footer-social">
    <ul class="list-inline social-icons">
      <li>
        <a href="https://www.facebook.com/SAPConcur"
           target="_blank">
          <span class="sr-only">Facebook</span>
          <span class="fa-stack fa-lg">
            <i class="fas fa-circle fa-stack-2x"></i>
            <i class="fab fa-facebook-f fa-stack-1x fa-inverse"></i>
          </span>
        </a>
      </li>
      <li>
        <a href="https://www.linkedin.com/company/5822"
           target="_blank">
          <span class="sr-only">LinkedIn</span>
          <span class="fa-stack fa-lg">
            <i class="fas fa-circle fa-stack-2x"></i>
            <i class="fab fa-linkedin-in fa-stack-1x fa-inverse"></i>
          </span>
        </a>
      </li>
      <li>
        <a href="https://twitter.com/sapconcur"
           target="_blank">
          <span class="sr-only">Twitter</span>
          <span class="fa-stack fa-lg">
            <i class="fas fa-circle fa-stack-2x"></i>
            <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
          </span>
        </a>
      </li>
      <li>
        <a href="https://www.youtube.com/playlist?list=PLLNSVdjqNPVseaDkR5hSF4CDjnlLK7_nq"
           target="_blank">
          <span class="sr-only">Youtube</span>
          <span class="fa-stack fa-lg">
            <i class="fas fa-circle fa-stack-2x"></i>
            <i class="fab fa-youtube fa-stack-1x fa-inverse"></i>
          </span>
        </a>
      </li>
    </ul>
  </div>
  <!-- End Social Links -->
</footer>
<!--/.footer-->

  </div>
  <!--/wrapper-->

  <!-- JS Global Compulsory -->
<script type="text/javascript" src="/assets/plugins/jquery/jquery.min.js"></script>
<script type="text/javascript" src="/assets/plugins/jquery/jquery-migrate.min.js"></script>
<script type="text/javascript" src="/assets/plugins/bootstrap/js/bootstrap.min.js"></script>

<!-- Swagger -->
<!-- <script src="/swagger-ui/lib/jquery-1.8.0.min.js" type="text/javascript"></script> -->



<script>
  var replacementURL = "preview.developer.concur.com/api-explorer-proxy";
</script>



<!-- JS Implementing Plugins -->
<script type="text/javascript" src="/assets/plugins/back-to-top.js"></script>
<!-- JS Page Level -->
<script type="text/javascript" src="/assets/js/app.js"></script>
<script type="text/javascript">
  jQuery(document).ready(function() {
    App.init();
  });
</script>

<script>
  var oHeader = document.getElementById("header-navbar");
  var oContent = document.getElementById("main-content");
  var oFooter = document.getElementById("footer");

  // Set content overall height
  var iNewHeight = oContent.offsetHeight - (oHeader.offsetHeight + oFooter.offsetHeight);
  var sHeight = "" + iNewHeight + "px";
  oContent.style.height = sHeight;

  // Set Triple component heights.
  // var oBreadcrumb = document.getElementById("breadcrumbs");
  var oLeftNav = document.getElementById("left-navigation");
  var oMDContent = document.getElementById("markdown-body");
  var oMDToc = document.getElementById("markdown-toc");
  var iViewWidth = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0)

  // Widths are 2-8-2 or 2-10 if no MDToc
  var sWidth;
  if (iViewWidth < 989) {
    if (!!oLeftNav) {
      oLeftNav.style.height = 100;
      sWidth = "" + (window.innerWidth * 0.950) + "px";
      oLeftNav.style.maxWidth = sWidth;
    }
  } else {
    if (!!oLeftNav) {
      oLeftNav.style.height = sHeight;
      sWidth = "" + (window.innerWidth * 0.166) + "px";
      oLeftNav.style.maxWidth = sWidth;
    }
    if (!!oMDContent) {
      oMDContent.style.height = sHeight;
      if (!!oMDToc) {
        // 8 / 12
        sWidth = "" + (window.innerWidth *0.66) + "px";
        oMDContent.style.maxWidth = sWidth;
      } else {
        // 10 / 12
        oMDContent.style.maxWidth = window.innerWidth * 0.833;
        sWidth = "" + (window.innerWidth * 0.833) + "px";
        oMDContent.style.maxWidth = sWidth;
      }
    }
    if (!!oMDToc) {
      oMDToc.style.height = sHeight;
      sWidth = "" + (window.innerWidth * 0.166) + "px";
      oMDToc.style.maxWidth = sWidth;
    }
  }
</script>


</body>

</html>
