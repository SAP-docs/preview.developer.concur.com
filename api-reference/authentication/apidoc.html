<!DOCTYPE html>
<html lang="en">

<head>
  


  <title> SAP Concur Developer Center | Authentication</title>


<!-- Meta -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="The starting point for anyone interested in integrating with the SAP Concur platform that reaches 80 million end users.">
<meta name="author" content="">

<!-- Sitemap link -->
<link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml" />

<!-- Favicon -->
<link rel="shortcut icon" href="/assets/img/square-sap-favicon.png" type="image/png">

<!-- Adobe Analytics Global-->
<script src="https://assets.adobedtm.com/e1226b306979/aeb854337dc8/launch-85c98625c1e8.min.js" async></script>

<!-- Canonical link-->
<link rel="canonical" href="https://preview.developer.concur.com/api-reference/authentication/apidoc.html" data-proofer-ignore>

<!-- CSS Global Compulsory -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400">
<link rel="stylesheet" href="/assets/style.css">

<!-- CSS Implementing Plugins -->
<link rel="stylesheet" href="/assets/plugins/font-awesome/css/all.min.css">



<link rel="alternate" type="application/rss+xml" title="SAP Concur Developer Center RSS" href="/feed.xml" />

</head>

<body>


  <div class="wrapper page-option-v1">
    <div class="hidden-print">
  <nav id="header-navbar" class="navbar navbar-inverse hidden-print">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header col-6">
        <button type="button" class="navbar-toggle collapsed" style="color: white" data-toggle="collapse" data-target="#nav-collapse-1" aria-expanded="false">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/">
          <img src="/assets/img/sap-concur-logo-white.png" alt="Logo">
          <div class="app-name">Developer Center</div>
        </a>
      </div>
      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse col-6" id="nav-collapse-1">
        <ul class="nav navbar-nav navbar-right" style="padding-top: 9px">
          <!-- Development -->
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" style="color: white" role="button" aria-haspopup="true">
              Development <span class="caret"></span>
            </a>
            <ul class="dropdown-menu multi-column three-column-menu">
              <div class="row">
                <div class="col-sm-4">
                  <ul class="multi-column-dropdown">
                    <li class="column-icon">
                      <span class="fa-stack fa-lg">
                        <i class="fas fa-circle fa-stack-2x"></i>
                        <i class="fas fa-map-marked-alt fa-stack-1x fa-inverse"></i>
                      </span>
                    </li>
                    <li class="column-title">About</li>
                    <li><a href="/getting-started.html">Getting Started</a></li>
                    <li><a href="/api-reference/authentication/getting-started.html">Authentication</a></li>
                    <li><a href="/platform/index.html">Platform</a></li>
                    <li><a href="/tools-support/deprecation-policy.html">API Deprecation</a></li>
                  </ul>
                </div>
                <div class="col-sm-4">
                  <ul class="multi-column-dropdown">
                    <li class="column-icon">
                      <span class="fa-stack fa-lg">
                        <i class="fas fa-circle fa-stack-2x"></i>
                        <i class="fas fa-book fa-stack-1x fa-inverse"></i>
                      </span>
                    </li>
                    <li class="column-title">Documentation</li>
                    <li><a href="/api-reference/">API Reference</a></li>
                    <li><a href="/api-explorer/">API Explorer</a></li>
                    <li><a href="/api-guides/">API Guides</a></li>
                    <li><a href="/event-topics/">Event Topics</a></li>
                  </ul>
                </div>
                <div class="col-sm-4">
                  <ul class="multi-column-dropdown">
                    <li class="column-icon">
                      <span class="fa-stack fa-lg">
                        <i class="fas fa-circle fa-stack-2x"></i>
                        <i class="fas fa-clipboard-list fa-stack-1x fa-inverse"></i>
                      </span>
                    </li>
                    <li class="column-title">UX Guidelines</li>
                    <li><a href="/manage-apps/go-market-docs/app-center-ux-guidelines-enterprise.html">Enterprise Applications</a></li>
                    <li><a href="/manage-apps/go-market-docs/app-center-ux-guidelines-consumer.html">User Connections</a>
                    </li>
                  </ul>
                </div>
              </div>
            </ul>
          </li>
          <!-- Partner Resources -->
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" style="color: white" aria-haspopup="true" aria-expanded="false">
              Partner Resources <span class="caret"></span>
            </a>
            <ul class="dropdown-menu">
              <li class="column-icon">
                <span class="fa-stack fa-lg">
                  <i class="fas fa-circle fa-stack-2x"></i>
                  <i class="fas fa-lightbulb fa-stack-1x fa-inverse"></i>
                </span>
              </li>
              <li class="column-title">Partner Resources</li>
              <li><a href="/manage-apps/app-certification.html">App Certification</a></li>
              <li><a href="/manage-apps/partner-applications.html">App Registration & Management</a></li>
              <li><a href="/manage-apps/redirect.html">Go to Market</a></li>
              <li><a href="https://www.concur.com/en-us/app-center" target="_blank">App Center</a></li>
              <li><a href="https://www.concursolutions.com/" target="_blank">Login to Concur</a></li>
            </ul>
          </li>
          <!-- Support -->
          <li
            class="dropdown">
            <a href="#" class="dropdown-toggle" style="color: white" data-toggle="dropdown" role="button" aria-haspopup="true">
              Support <span class="caret"></span>
            </a>
            <ul class="dropdown-menu multi-column two-column-menu">
              <div class="row">
                <div class="col-sm-6">
                  <ul class="multi-column-dropdown">
                    <li class="column-icon">
                      <span class="fa-stack fa-lg">
                        <i class="fas fa-circle fa-stack-2x"></i>
                        <i class="fas fa-question fa-stack-1x fa-inverse"></i>
                      </span>
                    </li>
                    <li class="column-title">Support</li>
                    <li><a href="/tools-support/support.html">Support Options</a></li>
                    <li><a href="https://open.concur.com/" target="_blank">Service Status</a></li>
                  </ul>
                </div>
                <div class="col-sm-6">
                  <ul class="multi-column-dropdown">
                    <li class="column-icon">
                      <span class="fa-stack fa-lg">
                        <i class="fas fa-circle fa-stack-2x"></i>
                        <i class="fas fa-bullhorn fa-stack-1x fa-inverse"></i>
                      </span>
                    </li>
                    <li class="column-title">Bulletin</li>
                    <li><a href="/tools-support/release-notes/index.html">Release Notes</a></li>
                  </ul>
                </div>
              </div>
            </ul>
          </li>
          <!-- Search -->
          <li>
            <a href="#" class="search">
              <span class="sr-only">Search</span>
              <i class="fas fa-search search-btn" style="color:white;"></i>
            </a>
            <div class="search-open">
              <div class="input-group animated fadeInDown">
                <form method="GET" action="/search.html" id="searchbox_000165422556797149853:qlbg8re_3tu">
                  <input value="000165422556797149853:qlbg8re_3tu" name="cx" type="hidden">
                  <input value="FORID:11" name="cof" type="hidden"> <!-- FORID values configure ad positions -->
                  <div class="input-group">
                    <label for="q" hidden>Search</label>
                    <input type="text" id="q" class="form-control" name="q" placeholder="Search">
                    <span class="input-group-btn">
                      <button type="submit" class="btn bright-blue">Go</button>
                    </span>
                  </div>
                </form>
              </div>
            </div>
          </li>
        </ul> <!-- /.navbar-nav -->
      </div> <!-- /.navbar-collapse -->
  </nav> <!-- /.navbar -->
</div>


    <div id="main-content"
         class="main-content">
      <div class="container-fluid content">
  <div class="row">
    <div id="left-navigation"
         class="col-md-2 left-navigation">
      







<ul class="list-group sidebar-nav-v1 hidden-print" id="sidebar-nav">





  
    <li class="list-group-item ">
      <a href="/api-reference/">API Reference</a>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle active">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-authentication">
        Authentication
      </a>
      <ul id="collapse-authentication" class="collapse in">
        
          <li >
            <a href="/api-reference/authentication/getting-started.html">Getting Started</a>
          </li>
        
          <li  class="active" >
            <a href="/api-reference/authentication/apidoc.html">Authentication</a>
          </li>
        
          <li >
            <a href="/api-reference/authentication/company-auth.html">Company Level Authentication</a>
          </li>
        
          <li >
            <a href="/api-reference/authentication/migrationguide.html">Migrating to Oauth2 Tokens</a>
          </li>
        
          <li >
            <a href="/api-reference/authentication/scopes.html">Scopes</a>
          </li>
        
          <li >
            <a href="/api-reference/authentication/oauth2-app-mgmt-tool.html">OAuth 2.0 Application Management Tool</a>
          </li>
        
          <li >
            <a href="/api-reference/authentication/company-refresh-tool.html">Company Request Token Self-Service Tool</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-budget-v4">
        Budget v4
      </a>
      <ul id="collapse-budget-v4" class="collapse ">
        
          <li >
            <a href="/api-reference/budget/getting-started.html">Getting Started</a>
          </li>
        
          <li >
            <a href="/api-reference/budget/v4.fiscal-year.html">Fiscal Year</a>
          </li>
        
          <li >
            <a href="/api-reference/budget/v4.budget-category.html">Budget Category</a>
          </li>
        
          <li >
            <a href="/api-reference/budget/v4.budget-header.html">Budget Item</a>
          </li>
        
          <li >
            <a href="/api-reference/budget/v4.budget-trackingfield.html">Budget Tracking Field</a>
          </li>
        
          <li >
            <a href="/api-reference/budget/v4.budget-adjustments.html">Budget Adjustments</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-callouts">
        Callouts
      </a>
      <ul id="collapse-callouts" class="collapse ">
        
          <li >
            <a href="/api-reference/callouts/callouts-application-connectors.html">Callouts and Application Connectors</a>
          </li>
        
          <li >
            <a href="/api-reference/callouts/delete-notification.html">Delete notification requests</a>
          </li>
        
          <li >
            <a href="/api-reference/callouts/event-notification.html">Event Notification Callout</a>
          </li>
        
          <li >
            <a href="/api-reference/callouts/fetch-attendee.html">Fetch Attendee Version 2 Callout</a>
          </li>
        
          <li >
            <a href="/api-reference/callouts/fetch-list.html">Fetch List Callout</a>
          </li>
        
          <li >
            <a href="/api-reference/callouts/get-notifications-status.html">Get notifications by status</a>
          </li>
        
          <li >
            <a href="/api-reference/callouts/launch-external-url-request.html">Launch an external URL request v1</a>
          </li>
        
          <li >
            <a href="/api-reference/callouts/v4.launch-external-url.html">Launch External URL - Expense v4</a>
          </li>
        
          <li >
            <a href="/api-reference/callouts/v4.launch-external-url-concur-request.html">Launch External URL - Request v4</a>
          </li>
        
          <li >
            <a href="/api-reference/callouts/post-event-notification.html">Post an event notification request</a>
          </li>
        
          <li >
            <a href="/api-reference/callouts/post-fetch-attendee.html">Post an attendee search request</a>
          </li>
        
          <li >
            <a href="/api-reference/callouts/post-list-search-request.html">Post a list search request</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-cards-v4">
        Cards v4
      </a>
      <ul id="collapse-cards-v4" class="collapse ">
        
          <li >
            <a href="/api-reference/cards/v4.cards-get-started.html">Getting Started</a>
          </li>
        
          <li >
            <a href="/api-reference/cards/v4.cards-endpoints.bulkrequest.html">Bulk Request</a>
          </li>
        
          <li >
            <a href="/api-reference/cards/v4.cards-endpoints.account.html">Credit Card Account</a>
          </li>
        
          <li >
            <a href="/api-reference/cards/v4.cards-endpoints.transaction.html">Credit Card Transaction</a>
          </li>
        
          <li >
            <a href="/api-reference/cards/v4.cards-endpoints.schemas.html">Schemas</a>
          </li>
        
      </ul>
    </li>

  



  
    <li class="list-group-item ">
      <a href="/api-reference/cash-advance/v4-1.cash-advance.html">Cash Advance v4.1</a>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-common">
        Common
      </a>
      <ul id="collapse-common" class="collapse ">
        
          <li >
            <a href="/api-reference/common/attendees/v4.attendees.html">Attendees v4</a>
          </li>
        
          <li >
            <a href="/api-reference/common/connection-requests/connection-requests-resource.html">Connection Requests v3.2</a>
          </li>
        
          <li >
            <a href="/api-reference/common/extracts/v1.extracts.html">Extracts v1</a>
          </li>
        
          <li >
            <a href="/api-reference/common/lists/v4.list.html">List v4</a>
          </li>
        
          <li >
            <a href="/api-reference/common/list-item/v4.list-item.html">List Item v4</a>
          </li>
        
          <li >
            <a href="/api-reference/common/list-item/v4.list-item-bulk.html">List Item Bulk v4</a>
          </li>
        
          <li >
            <a href="/api-reference/common/locations/v3.locations.html">Locations v3</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-direct-connect-ground-transportation-v1">
        Direct Connect - Ground Transportation v1
      </a>
      <ul id="collapse-direct-connect-ground-transportation-v1" class="collapse ">
        
          <li >
            <a href="/api-reference/direct-connects/ground-transportation.html">Ground Transportation Direct Connect</a>
          </li>
        
          <li >
            <a href="/api-reference/direct-connects/ground-transportation/cancel-reservation.html">Cancel a reservation</a>
          </li>
        
          <li >
            <a href="/api-reference/direct-connects/ground-transportation/post-reservation-detail-search.html">Post a reservation detail search</a>
          </li>
        
          <li >
            <a href="/api-reference/direct-connects/ground-transportation/post-reservation-sell.html">Post a reservation sell request</a>
          </li>
        
          <li >
            <a href="/api-reference/direct-connects/ground-transportation/post-transportation-search.html">Post a transportation search</a>
          </li>
        
          <li >
            <a href="/api-reference/direct-connects/ground-transportation/update-reservation-supplier.html">Update reservation with supplier</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-direct-connect-hotel-service-v4">
        Direct Connect - Hotel Service v4
      </a>
      <ul id="collapse-direct-connect-hotel-service-v4" class="collapse ">
        
          <li >
            <a href="/api-reference/direct-connects/hotel-service-4/v4.getting-started.html">Getting Started</a>
          </li>
        
          <li >
            <a href="/api-reference/direct-connects/hotel-service-4/v4.endpoints.html">Endpoints</a>
          </li>
        
          <li >
            <a href="/api-reference/direct-connects/hotel-service-4/v4.change-notification-get-started.html">Hotel Service Change Notification</a>
          </li>
        
          <li >
            <a href="/api-reference/direct-connects/hotel-service-4/v4.schemas.html">Schemas</a>
          </li>
        
      </ul>
    </li>

  



  
    <li class="list-group-item ">
      <a href="/api-reference/document-compliance-gateway/V4.document-compliance-gateway.html">Document Compliance Gateway v4</a>
    </li>

  



  
    <li class="list-group-item ">
      <a href="/api-reference/ess/v4.event-subscription.html">Event Subscription Service v4</a>
    </li>

  



  
    <li class="list-group-item ">
      <a href="/api-reference/expense/exchange-rate/v4.exchange-rate.html">Exchange Rate v4</a>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-expense-v1">
        Expense v1
      </a>
      <ul id="collapse-expense-v1" class="collapse ">
        
          <li >
            <a href="/api-reference/expense/expense-report/company-card-transaction-resource.html">Company Card Transactions v1.1</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/expense-report/expense-delegators.html">Expense Delegators v1.1</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/expense-report/expense-form-field.html">Expense Form Field v1.1</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/expense-report/expense-form.html">Expense Form v1.1</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/payment-batch/v1.payment-batches.html">Payment Batches v1.1</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/expense-report/integration-status.html">Integration Status</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/expense-report/post-report-exceptions.html">Create an exception to a report</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/expense-report/post-report-submission.html">Submit an expense report</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/expense-report/post-report-workflow-action.html">Post an expense report workflow action</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-expense-v3">
        Expense v3
      </a>
      <ul id="collapse-expense-v3" class="collapse ">
        
          <li >
            <a href="/api-reference/expense/allocations/expense-allocations.html">Allocations v3</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/attendee-types/v3.attendee-types.html">Attendee Types v3</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/attendees/v3.attendees.html">Attendees v3</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/digital-tax-invoices/digital-tax-invoice.html">Digital Tax Invoices v3</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/expense-report/v3.expense-entry-attendee.html">Entry Attendee Associations v3</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/expense-report/expense-entry.html">Entries v3</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/expense-report/expense-group-configurations.html">Expense Group Configurations v3</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/expense-report/expense-itemization.html">Itemizations v3</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/expense-report/v3.reports.html">Reports v3</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-expense-v4">
        Expense v4
      </a>
      <ul id="collapse-expense-v4" class="collapse ">
        
          <li >
            <a href="/api-reference/expense/expense-report/v4.allocations.html">Allocations v4</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/expense-report/v4.expense-attendee-associations.html">Attendee Associations v4</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/expense-report/v4.comments.html">Comments v4</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/expense-report/v4.exceptions.html">Exceptions v4</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/expense-config/v4.expense.config.html">Expense Configuration v4</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/expense-report/v4.expenses.html">Expenses v4</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/expense-report/v4.reports.html">Reports v4</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/expense-report/v4.request-associations.html">Request Associations v4</a>
          </li>
        
          <li >
            <a href="/api-reference/expense/expense-report/v4.workflows.html">Workflows v4</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-financial-integration-service-v4">
        Financial Integration Service v4
      </a>
      <ul id="collapse-financial-integration-service-v4" class="collapse ">
        
          <li >
            <a href="/api-reference/financial-integration/v4.financial-integration.html">Getting Started</a>
          </li>
        
          <li >
            <a href="/api-reference/financial-integration/v4.financial-integration-service-use-cases.html">Use Cases</a>
          </li>
        
          <li >
            <a href="/api-reference/financial-integration/v4.financial-integration-use-cases-extract-information.html">Use Cases Extract Information</a>
          </li>
        
          <li >
            <a href="/api-reference/financial-integration/v4.financial-documents-schema.html">Schemas</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-insights">
        Insights
      </a>
      <ul id="collapse-insights" class="collapse ">
        
          <li >
            <a href="/api-reference/insights/latest-bookings-resource.html">Latest Bookings</a>
          </li>
        
          <li >
            <a href="/api-reference/insights/opportunities-resource.html">Opportunities</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-invoice">
        Invoice
      </a>
      <ul id="collapse-invoice" class="collapse ">
        
          <li >
            <a href="/api-reference/invoice/v3.payment-request-digest.html">Retrieve Invoice Digests v3</a>
          </li>
        
          <li >
            <a href="/api-reference/invoice/v3.payment-request.html">Invoice v3</a>
          </li>
        
          <li >
            <a href="/api-reference/invoice/v4.invoice-pay.html">Invoice Pay v4</a>
          </li>
        
          <li >
            <a href="/api-reference/invoice/v4.invoice-payment-confirmation.html">Invoice Payment Confirmation v4</a>
          </li>
        
          <li >
            <a href="/api-reference/invoice/v3.purchase-order.html">Purchase Orders v3</a>
          </li>
        
          <li >
            <a href="/api-reference/invoice/v4.purchase-request-get-started.html">Purchase Request v4 - Get Started</a>
          </li>
        
          <li >
            <a href="/api-reference/invoice/v4.purchase-request-endpoints.html">Purchase Request v4 - Endpoints</a>
          </li>
        
          <li >
            <a href="/api-reference/invoice/v3.purchase-order-receipt.html">Purchase Orders Receipt v3</a>
          </li>
        
          <li >
            <a href="/api-reference/invoice/v3.sales-tax-validation.html">Sales Tax Validation v3</a>
          </li>
        
          <li >
            <a href="/api-reference/invoice/v3.1.vendor.html">Vendor v3.1</a>
          </li>
        
      </ul>
    </li>

  



  
    <li class="list-group-item ">
      <a href="/api-reference/expense/quick-expense/v4.quick-expense.html">Quick Expense v4</a>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-receipts">
        Receipts
      </a>
      <ul id="collapse-receipts" class="collapse ">
        
          <li >
            <a href="/api-reference/receipts/get-started.html">Get Started</a>
          </li>
        
          <li >
            <a href="/api-reference/receipts/endpoints.html">Endpoints</a>
          </li>
        
          <li >
            <a href="/api-reference/receipts/supported-receipt-types.html">Supported Receipt Types</a>
          </li>
        
          <li >
            <a href="/api-reference/receipts/sample-receipts.html">Sample Receipts</a>
          </li>
        
          <li >
            <a href="/api-reference/receipts/response-codes.html">Response Codes</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-receipt-image">
        Receipt Image
      </a>
      <ul id="collapse-receipt-image" class="collapse ">
        
          <li >
            <a href="/api-reference/image/v1.image.html">Image v1</a>
          </li>
        
          <li >
            <a href="/api-reference/image/v3.image.html">Image v3</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-request-v4">
        Request v4
      </a>
      <ul id="collapse-request-v4" class="collapse ">
        
          <li >
            <a href="/api-reference/request/v4.get-started.html">Getting Started</a>
          </li>
        
          <li >
            <a href="/api-reference/request/v4.endpoints.request-resources.html">Request</a>
          </li>
        
          <li >
            <a href="/api-reference/request/v4.endpoints.workflow-resources.html">Workflow</a>
          </li>
        
          <li >
            <a href="/api-reference/request/v4.endpoints.expected-expense-resources.html">Expected Expense</a>
          </li>
        
          <li >
            <a href="/api-reference/request/v4.endpoints.allocation-resources.html">Request Allocations</a>
          </li>
        
          <li >
            <a href="/api-reference/request/v4.endpoints.cashadvance-resources.html">Request Cash Advance</a>
          </li>
        
          <li >
            <a href="/api-reference/request/v4.endpoints.policy-resources.html">Request Policy</a>
          </li>
        
          <li >
            <a href="/api-reference/request/v4.endpoints.travel-agency-resources.html">Travel Agency</a>
          </li>
        
          <li >
            <a href="/api-reference/request/v4.endpoints.agency-proposal-resources.html">Agency Proposal</a>
          </li>
        
          <li >
            <a href="/api-reference/request/v4.endpoints.schemas.html">Schema</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-spend-documents-v4">
        Spend Documents v4
      </a>
      <ul id="collapse-spend-documents-v4" class="collapse ">
        
          <li >
            <a href="/api-reference/spend-documents/v4.spend-documents.html">Getting Started</a>
          </li>
        
          <li >
            <a href="/api-reference/spend-documents/get-receipt.html">Get Receipt</a>
          </li>
        
          <li >
            <a href="/api-reference/spend-documents/post-receipt.html">Upload a New Receipt</a>
          </li>
        
          <li >
            <a href="/api-reference/spend-documents/schema.html">Schema</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-travel">
        Travel
      </a>
      <ul id="collapse-travel" class="collapse ">
        
          <li >
            <a href="/api-reference/travel/itinerary/itinerary.html">Itinerary v1 – Getting Started</a>
          </li>
        
          <li >
            <a href="/api-reference/travel/itinerary-tmc-thirdparty/index.html">Itinerary v1 Usage</a>
          </li>
        
          <li >
            <a href="/api-reference/travel/itinerary/trip/trip-resource.html">Trip v1.1</a>
          </li>
        
          <li >
            <a href="/api-reference/travel/itinerary/booking/booking-resource.html">Booking v1.1</a>
          </li>
        
          <li >
            <a href="/api-reference/travel/itinerary-v4/v4.itinerary.html">Itinerary v4</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-travel-allowance-v4">
        Travel Allowance v4
      </a>
      <ul id="collapse-travel-allowance-v4" class="collapse ">
        
          <li >
            <a href="/api-reference/travelallowance/v4.travelallowance-get-started.html">Getting Started</a>
          </li>
        
          <li >
            <a href="/api-reference/travelallowance/v4.travelallowance-itinerary-endpoints.html">Itinerary</a>
          </li>
        
          <li >
            <a href="/api-reference/travelallowance/v4.travelallowance-calculationresults-endpoints.html">Calculation Results</a>
          </li>
        
          <li >
            <a href="/api-reference/travelallowance/v4.travelallowance-configuration-endpoints.html">Configuration</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-travel-profile">
        Travel Profile
      </a>
      <ul id="collapse-travel-profile" class="collapse ">
        
          <li >
            <a href="/api-reference/travel-profile/v2.profile-service.html">Travel Profile v2</a>
          </li>
        
          <li >
            <a href="/api-reference/travel-profile/v2.profile-resource.html">Travel Profile v2 - Resource</a>
          </li>
        
          <li >
            <a href="/api-reference/travel-profile/v1.loyalty-program-resource.html">Travel Profile v1 - Loyalty Program</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-user">
        User
      </a>
      <ul id="collapse-user" class="collapse ">
        
          <li >
            <a href="/api-reference/user-provisioning/v4.user-provisioning.html">User Provisioning v4</a>
          </li>
        
          <li >
            <a href="/api-reference/profile/v4.identity.html">Identity v4</a>
          </li>
        
          <li >
            <a href="/api-reference/profile/v4.1.identity.html">Identity v4.1</a>
          </li>
        
          <li >
            <a href="/api-reference/user-provisioning/spend/v4.1.spend-user-retrieval.html">Spend User Retrieval v4.1</a>
          </li>
        
          <li >
            <a href="/api-reference/user-provisioning/spend/v4.spend-role-code-definition.html">Spend Role Codes</a>
          </li>
        
          <li >
            <a href="/api-reference/user-provisioning/travel/v4.travel-extension.html">Travel Extension v4</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-general">
        General
      </a>
      <ul id="collapse-general" class="collapse ">
        
          <li >
            <a href="/api-reference/http-status-codes.html">HTTP Status Codes</a>
          </li>
        
          <li >
            <a href="/api-reference/locale-codes.html">Locale Codes</a>
          </li>
        
          <li >
            <a href="/api-reference/spend-category-codes.html">Spend Category Codes</a>
          </li>
        
          <li >
            <a href="/api-reference/deprecated.html">Deprecated</a>
          </li>
        
      </ul>
    </li>

  



</ul>

    </div>
    <!--/col-md-3-->

    
      <div id="markdown-body"
           class="col-md-8 markdown-body">
        

        <h1 id="authentication">Authentication</h1>

<h2 id="access-tokens-">Access Tokens <a name="access_token"></a></h2>

<p>The Oauth2 service generates access tokens for authenticated users, applications or companies. The token returned in the Oauth2 response can be used to access protected resources on SAP Concur services.</p>

<p>The Oauth2 response can, depending on grant type contain these values:</p>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Format</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">expires_in</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>-</td>
      <td>The lifetime in seconds of the access token</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">scope</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>-</td>
      <td>The scope of the access token as granted to the client application</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">token_type</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>-</td>
      <td>The type of token returned. Value will be <code class="language-plaintext highlighter-rouge">Bearer</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">access_token</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>-</td>
      <td>Token used to access protected resources of SAP Concur services.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">refresh_token</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>-</td>
      <td>Refresh token required to request a new access token for a given user.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">geolocation</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>-</td>
      <td>The base URL for where the user profile lives. See <a href="#base_uri">base URI</a> for usage.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">id_token</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>-</td>
      <td>The OIDC Token in the JSON Web Token (JWT) format that describes the user or company</td>
    </tr>
  </tbody>
</table>

<p><strong>Token Response</strong></p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Date</span><span class="p">:</span> <span class="s">date-requested</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">3397</span>
<span class="na">Connection</span><span class="p">:</span> <span class="s">Close</span>
</code></pre></div></div>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"expires_in"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3600"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"app-scopes"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bearer"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"access_token"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"refresh_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"refresh_token"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oidc_token"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"geolocation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://us.api.concursolutions.com"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h2 id="obtaining-a-token-">Obtaining a token <a name="obtain_token"></a></h2>

<p>You can obtain a token for three different types of principals in the SAP Concur universe.</p>

<ul>
  <li>User</li>
  <li>Application</li>
  <li>Company</li>
</ul>

<p><strong>Token Lifetime</strong></p>

<p>An <code class="language-plaintext highlighter-rouge">accessToken</code> has a one hour lifetime.</p>

<p>In order to obtain a token, the client application needs to call the Oauth2 endpoint using various grants depending on the authentication scenarios required. The full list of supported scenarios is provided below:</p>

<ul>
  <li><a href="#auth_grant">Authorization grant</a></li>
  <li><a href="#password_grant">Password grant</a></li>
  <li><a href="#client_credentials">Client Credentials grant</a></li>
  <li><a href="#otp_grant">One Time Password grant</a></li>
</ul>

<h2 id="refreshing-a-token-">Refreshing a token <a name="refresh_token"></a></h2>

<p>The refresh grant is used to refresh an access_token that has expired. This grant can be used anytime a refresh_token is returned in the response of another grant request. No user interaction is required.</p>

<p><strong>Token Lifetime</strong></p>

<p>A refresh token has a <strong>six month</strong> lifetime. If the refresh token expires, the client application must reinitiate the authorization process. When a refresh token is used to request a new access token, both a new access token as well as a new refresh token are returned in the response. This token can change even if most of the time, this value is the same. Client applications should treat all returned refresh tokens as new tokens and overwrite the stored tokens with the new token from the response.</p>

<p>It is recommended that the client application use the refresh grant to request a new access token as the initial step of accessing protected resources of SAP Concur services.</p>

<p><strong>Refreshing the token</strong></p>

<p>To request a new access token using a valid refresh token, use the Oauth2 /token endpoint. Use the <code class="language-plaintext highlighter-rouge">application/x-www-form-urlencoded</code> content type.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>POST /oauth2/v0/token
</code></pre></div></div>

<p><strong>Post Body</strong></p>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Format</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">client_id</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td><code class="language-plaintext highlighter-rouge">UUID</code></td>
      <td><strong>Required</strong> The client applications client_id supplied by App Management</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">client_secret</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td><code class="language-plaintext highlighter-rouge">UUID</code></td>
      <td><strong>Required</strong> The client applications client_secret supplied by App Management</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">refresh_token</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>-</td>
      <td><strong>Required</strong> An existing valid refresh token to be used to request a new access token</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">scope</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>-</td>
      <td><strong>Optional</strong> The client applications list of scopes</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">grant_type</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>-</td>
      <td><strong>Required</strong> The grant type instructs the Oauth2 service how to process the request. For refresh token, the value must be <code class="language-plaintext highlighter-rouge">refresh_token</code></td>
    </tr>
  </tbody>
</table>

<p><strong>Request</strong></p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">POST</span> <span class="nn">/oauth2/v0/token</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/x-www-form-urlencoded</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">us.api.concursolutions.com</span>
<span class="na">Connection</span><span class="p">:</span> <span class="s">close</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">437</span>

POST BODY
client_id=your-client_id
&amp;client_secret=your-client_secret
&amp;grant_type=refresh_token
&amp;refresh_token=valid-refresh_token
&amp;scope=app-scope
</code></pre></div></div>

<p><strong>Response</strong></p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Date</span><span class="p">:</span> <span class="s">date-requested</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">3397</span>
<span class="na">Connection</span><span class="p">:</span> <span class="s">Close</span>
</code></pre></div></div>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"expires_in"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3600"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"app-scopes"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bearer"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"access_token"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"refresh_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"refresh_token"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oidc_token"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"geolocation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://us.api.concursolutions.com"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>When the token has been refreshed, store the geolocation and the refresh token as they may have changed.  On subsequent calls, use the last received geolocation and refresh token.</p>

<h2 id="revoking-a-token-">Revoking a token <a name="revoke_token"></a></h2>

<p>All refresh tokens associated to a user for an application can be revoked by calling the <code class="language-plaintext highlighter-rouge">https://us.api.concursolutions.com/app-mgmt/v0/connections</code> endpoint with a <code class="language-plaintext highlighter-rouge">DELETE</code> action. You have to provide the User’s <code class="language-plaintext highlighter-rouge">accessToken</code> in the Authorization Header as <code class="language-plaintext highlighter-rouge">Authorization: Bearer &lt;access_token&gt;</code>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>DELETE https://us.api.concursolutions.com/app-mgmt/v0/connections
</code></pre></div></div>

<p><strong>Request</strong></p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>DELETE https://us.api.concursolutions.com/app-mgmt/v0/connections
Authorization: Bearer <span class="o">{</span>token<span class="o">}</span>
</code></pre></div></div>

<p><strong>Response</strong></p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HTTP/1.1 200 OK
</code></pre></div></div>

<h2 id="managing-tokens-">Managing tokens <a name="manage_token"></a></h2>

<p>Refresh Tokens are strings that allow your application to obtain a fresh <code class="language-plaintext highlighter-rouge">accessToken</code> on behalf of a user to access SAP Concur APIs.  The exact format of the string can change, but may look similar to the following:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>e013335d-b4ce-4c43-a7e4-b67abc1adcb0
</code></pre></div></div>
<p>or like this:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2d725xipty0z7ha3vlpy8b2c3hqxmw
</code></pre></div></div>

<p>It is highly recommended that you store Refresh Tokens together with your user’s authorization metadata in your application every time you obtain a new <code class="language-plaintext highlighter-rouge">refreshToken</code> as they might change depending on different scenarios.</p>

<p>FOR APP CENTER AND SUPPLIER PARTNERS supporting all geolocations, storing the authorization metadata, including the geolocation are REQUIRED.</p>

<h2 id="base-uris-">Base URIs <a name="base_uri"></a></h2>

<p>When making API calls, the appropriate base URI should be used. There are three different scenarios:</p>
<ol>
  <li>Obtaining a token for a user.</li>
  <li>Refreshing a token.</li>
  <li>Calling other APIs.</li>
</ol>

<p>The base URI for obtaining a token will leverage your application’s geolocation.  The base URI for refreshing tokens and all other API calls will leverage the token’s geolocation.</p>

<h3 id="base-uris-for-obtaining-a-token"><a name="base_uri_obtain_token"></a>Base URIs for Obtaining a Token</h3>
<p>When your application is created, you will be provided with a client ID, secret and geolocation. When obtaining a token, your application should use the base URI for the geolocation in which your application exists.</p>

<p>There are two endpoints for each geolocation - one is the default (used for server-side calls) and the other should be used for client-side calls.</p>

<p>The full list of available token geolocations is available on the <a href="/platform/base-uris.html">Base URIs</a> page.</p>

<blockquote>
  <p><strong>When obtaining the token, the token’s geolocation will be included in the response. The token’s geolocation should be stored along with the token. The Developer’s app will then be able to make subsequent calls using the token and the correct end points based on the token’s GEO location.</strong></p>
</blockquote>

<h3 id="base-uris-for-all-other-calls">Base URIs for All Other Calls</h3>
<p>When refreshing a token or when calling any other APIs, the token’s geolocation should be used as the base URI.</p>

<p><strong>Note:</strong> Client-side calls should use the www- variant of the base URI.</p>

<h4 id="example">Example</h4>
<p>Consider an example where your application obtains a token and receives the response below:</p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Date</span><span class="p">:</span> <span class="s">date-requested</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">3397</span>
<span class="na">Connection</span><span class="p">:</span> <span class="s">Close</span>
</code></pre></div></div>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"expires_in"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3600"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"app-scopes"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bearer"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"access_token"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"refresh_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"refresh_token"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oidc_token"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"geolocation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://us.api.concursolutions.com"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>When your application calls another API, such as the receipts API to post a receipt, the request should be made using the base URI specified in the geolocation value of the response.  In the example above, that request would be made to https://us.api.concursolutions.com (if server side) or https://www-us.api.concursolutions.com (for clients).  The geolocation value can be any of the supported base URIs.  The application should store the specific geolocation it receives, and use it as the base URI for future API calls when using that token.</p>

<h2 id="id-token-">ID Token <a name="id_token"></a></h2>

<p>Authentication service will return an <a href="http://openid.net">OPENID</a> compatible <a href="http://openid.net/specs/openid-connect-core-1_0.html#IDToken">ID token</a> with every token request. This <code class="language-plaintext highlighter-rouge">id_token</code> is primarily used to describe information about a user or a company. You can obtain the userId from this token.</p>

<p><strong>Sample id_token:</strong></p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"aud"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e010e25d-b4ce-4ce3-a7e4-b670cb1adcb0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"concur.profile"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://us.api.concursolutions.com/profile/v1/principals/76459ad3-f77b-4d98-a21a-55333c9179f0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"concur.version"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nl">"concur.type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"sub"</span><span class="p">:</span><span class="w"> </span><span class="s2">"76459ad3-f77b-4d98-a21a-55333c9179f0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"iss"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://us.api.concursolutions.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"exp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1485485529</span><span class="p">,</span><span class="w">
  </span><span class="nl">"nbf"</span><span class="p">:</span><span class="w"> </span><span class="mi">1485481929</span><span class="p">,</span><span class="w">
  </span><span class="nl">"at_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"351515a6482f4ee1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"iat"</span><span class="p">:</span><span class="w"> </span><span class="mi">1485481929</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h3 id="verifying-an-id_token">Verifying an id_token</h3>
<p>The Authentication service exposes <a href="https://tools.ietf.org/html/rfc7517">JWKs</a> that can be used to validate the id_token in the form of a JWT. Validating a JWT is described in detail in <a href="https://tools.ietf.org/html/rfc7519#section-7.2">RFC 7519 - sec 7.2</a></p>

<p>This is the link to the SAP Concur JSON Web Key for Oauth2. <a href="https://www-us.api.concursolutions.com/oauth2/v0/jwks">https://www-us.api.concursolutions.com/oauth2/v0/jwks</a></p>

<h2 id="authorization-grant-">Authorization grant <a name="auth_grant"></a></h2>

<p>The authorization grant is the regular 3-legged oauth2 grant and is defined in detail in <a href="https://tools.ietf.org/html/rfc6749#section-4.1">RFC6749 sec-4.1</a>. This grant requires the user to explicitly authenticate themselves and authorise the application initiating the grant.</p>

<p>The users <em>must be</em> able to authenticate themselves via an SAP Concur username &amp; password. Users will be challenged to login by an Oauth2 HTML page.</p>

<p><strong>Who should use it</strong></p>
<ul>
  <li>3rd party “partner” websites - or -</li>
  <li>non-SAP Concur Applications - &amp; -</li>
  <li>Applications that need explicit user authentication &amp; authorization - &amp; -</li>
  <li>Applications that can securely store a code, access_token &amp; refresh_token</li>
</ul>

<p><strong>Grant details</strong></p>

<blockquote>
  <p>Note that the grant type must be accessed using the <code class="language-plaintext highlighter-rouge">www-</code> version of the API Gateway in order to avoid certificate issues with some browsers. (ex: https://www-us.api.concursolutions.com instead of https://us.api.concursolutions.com)</p>
</blockquote>

<p><code class="language-plaintext highlighter-rouge">GET /oauth2/v0/authorize</code></p>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Format</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">client_id</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td><code class="language-plaintext highlighter-rouge">UUID</code></td>
      <td>Applications client_id supplied by App Management</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">redirect_uri</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>-</td>
      <td>The redirect URI for your application to continue with the Oauth2 flow</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">scope</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>-</td>
      <td>List of scopes that application is asking for</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">response_type</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>-</td>
      <td><code class="language-plaintext highlighter-rouge">code</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">state</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>-</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<p>With this grant, the user has two authentication options:</p>
<ol>
  <li>Username and password</li>
  <li>One-time link using a verified email address</li>
</ol>

<p>With both options, once the user is successfully authenticated and the user authorizes your application, the user will be redirected to the redirect_URI specified in the initial /authorize call with a temporary token appended.</p>

<p><code class="language-plaintext highlighter-rouge">&lt;redirect_uri&gt;?geolocation=&lt;token_geolocation&gt;&amp;code=&lt;token&gt;</code></p>

<p><em>If the user is not successfully authenticated or does not authorize the scopes for your application, an error code and description will be appended to the redirect URI. Please refer to the <a href="#response_codes">Response Codes</a> section for more information.</em></p>

<p>Your application must then exchange the temporary token for a long-lived token using the below.</p>

<p><code class="language-plaintext highlighter-rouge">POST /oauth2/v0/token</code></p>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Format</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">client_id</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td><code class="language-plaintext highlighter-rouge">UUID</code></td>
      <td>Applications client_id supplied by App Management</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">client_secret</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td><code class="language-plaintext highlighter-rouge">UUID</code></td>
      <td>Applications client_secret supplied by App Management</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">redirect_uri</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>-</td>
      <td>The redirect_uri that is registered for the application</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">code</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td><code class="language-plaintext highlighter-rouge">UUID</code></td>
      <td>The authorization code provided by Auth</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">grant_type</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>-</td>
      <td><code class="language-plaintext highlighter-rouge">authorization_code</code></td>
    </tr>
  </tbody>
</table>

<h2 id="password-grant-">Password grant <a name="password_grant"></a></h2>

<p>The Password grant can be used when there is a trust relationship between the user and the application. There are two credential types allowed with Password Grant:</p>

<ol>
  <li>“Password”: with this credential type, the application either already has the user’s credentials or can obtain the user’s credentials by directly interacting with the user.</li>
  <li>“AuthToken”: This credential type is used for connections from the App Center. For App Center partners and TripLink suppliers, please refer to the <a href="/manage-apps/app-certification.html">certification documentation</a> for more information.</li>
</ol>

<p><strong>Post Body</strong></p>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Format</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">client_id</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td><code class="language-plaintext highlighter-rouge">UUID</code></td>
      <td>Applications client_id supplied by App Management</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">client_secret</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td><code class="language-plaintext highlighter-rouge">UUID</code></td>
      <td>Applications client_secret supplied by App Management</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">grant_type</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>-</td>
      <td>Specify which grant type you expect the oauth2 service to process. for password grant, the value is <code class="language-plaintext highlighter-rouge">password</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">username</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>-</td>
      <td>specify the username or userId</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">password</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>-</td>
      <td>specify the user’s password</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">credtype</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>-</td>
      <td>The credtype signifies to oauth2 which credential set is being submitted in the request. There are two supported values: <code class="language-plaintext highlighter-rouge">authtoken</code> and <code class="language-plaintext highlighter-rouge">password</code>. For connections from the App Center, use <code class="language-plaintext highlighter-rouge">authtoken</code>. if omitted, oauth2 will assume the type is <code class="language-plaintext highlighter-rouge">password</code>.</td>
    </tr>
  </tbody>
</table>

<p><strong>Request</strong></p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">POST</span> <span class="nn">/oauth2/v0/token</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/x-www-form-urlencoded</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">us.api.concursolutions.com</span>
<span class="na">Connection</span><span class="p">:</span> <span class="s">close</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">175</span>

POST BODY
client_id=your-client_id
&amp;client_secret=your-client_secret
&amp;grant_type=password
&amp;username=username
&amp;password=password
</code></pre></div></div>

<p><strong>Response</strong></p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Date</span><span class="p">:</span> <span class="s">date-requested</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">3397</span>
<span class="na">Connection</span><span class="p">:</span> <span class="s">Close</span>
</code></pre></div></div>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"expires_in"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3600"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"app-scopes"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bearer"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"access_token"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"refresh_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"refresh_token"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oidc_token"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"geolocation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://us.api.concursolutions.com"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>example bad login</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"invalid_grant"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"error_description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Incorrect Credentials. Please Retry"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h2 id="client-credentials-grant-">Client Credentials grant <a name="client_credentials"></a></h2>

<p>Use the <code class="language-plaintext highlighter-rouge">application/x-www-form-urlencoded</code> content type.</p>

<p><code class="language-plaintext highlighter-rouge">POST /oauth2/v0/token</code></p>

<p><strong>Post Body</strong></p>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Format</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">client_id</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td><code class="language-plaintext highlighter-rouge">UUID</code></td>
      <td><strong>Required</strong> Applications client_id supplied by App Management</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">client_secret</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td><code class="language-plaintext highlighter-rouge">UUID</code></td>
      <td><strong>Required</strong> Applications client_secret supplied by App Management</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">grant_type</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>-</td>
      <td><strong>Required</strong> Specify which grant type you expect the oauth2 service to process. For client_credentials grant, the value is <code class="language-plaintext highlighter-rouge">client_credentials</code></td>
    </tr>
  </tbody>
</table>

<p><strong>Request</strong></p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">POST</span> <span class="nn">/oauth2/v0/token</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/x-www-form-urlencoded</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">us.api.concursolutions.com</span>
<span class="na">Connection</span><span class="p">:</span> <span class="s">close</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">127</span>

POST BODY
client_id=your-client_id
&amp;client_secret=your-client_secret
&amp;grant_type=client_credentials
</code></pre></div></div>

<p><strong>Response</strong></p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Date</span><span class="p">:</span> <span class="s">date-requested</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">1626</span>
<span class="na">Connection</span><span class="p">:</span> <span class="s">Close</span>
</code></pre></div></div>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"expires_in"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3600"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"app-scopes"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bearer"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"access_token"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"geolocation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://us.api.concursolutions.com"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h2 id="one-time-password-grant-">One Time Password grant <a name="otp_grant"></a></h2>

<p>The One-time Password grant type leverages email, phone (text messaging), instant messaging and similar systems to provide per user access tokens to client applications. This grant type requires the following steps:</p>

<ol>
  <li>The calling application calls the OAuth2 service specifying the otp grant type along with required parameters.</li>
  <li>The OAuth2 service generates a one time token which it sends through the messaging mechanism chosen by the application.</li>
  <li>The user retrieves the token and presents it to the application. The means of having this presented to the application is the responsibility of the application.</li>
  <li>The application presents this one-time token to the OAuth2 service via the token endpoint.</li>
</ol>

<p><strong>Request a one-time token to be sent to the user</strong></p>

<p>Use the <code class="language-plaintext highlighter-rouge">application/x-www-form-urlencoded</code> content type.</p>

<p><code class="language-plaintext highlighter-rouge">POST /oauth2/v0/otp</code></p>

<p><strong>Post Body</strong></p>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Format</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">client_id</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td><code class="language-plaintext highlighter-rouge">UUID</code></td>
      <td><strong>Required</strong> The client_id as defined in the SAP Concur application management system.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">client_secret</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td><code class="language-plaintext highlighter-rouge">UUID</code></td>
      <td><strong>Required</strong> The client_secret as set by the client owner in the SAP Concur application management system.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">channel_handle</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>-</td>
      <td><strong>Required</strong> The location (email address, phone number) where the one time token should be sent. Currently, only <code class="language-plaintext highlighter-rouge">email address</code> is valid.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">channel_type</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>-</td>
      <td><strong>Required</strong> The type of messaging system to use. Currently only <code class="language-plaintext highlighter-rouge">email</code> is valid</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">name</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>-</td>
      <td><em>Optional</em> The name of the user that appears in the email.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">company</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>-</td>
      <td><em>Optional</em> The company or application name that appears in the email.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">link</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>-</td>
      <td><em>Optional</em> The callback URL that appears in the email for users to click to complete the auth flow.</td>
    </tr>
  </tbody>
</table>

<p>The calling application code can also append n-number of unique client defined parameters in the URI for the purpose of connecting the one time token to the application when received by the user. The names of these parameters cannot conflict with the API defined parameters.</p>

<p>The following are reserved words and cannot be used as client application defined parameters:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/otp: "client_id" "client_secret" "channel_type" "channel_handle"
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/token: "client_id" "client_secret" "channel_type" "channel_handle" "scope" "grant_type" "otp"
</code></pre></div></div>

<p>If the calling application chooses to send custom parameters, all of these exact same parameters <em>must be</em> included in subsequent API calls to acquire the access token. In other words, the URI signature, modulo the one time token parameter itself and token service specific parameters, <em>must match</em> the originating URI signature.</p>

<p><strong>Request</strong></p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">POST</span> <span class="nn">/oauth2/v0/otp</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/x-www-form-urlencoded</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">us.api.concursolutions.com</span>
<span class="na">Connection</span><span class="p">:</span> <span class="s">close</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">437</span>

POST BODY
client_id=your-client_id
&amp;client_secret=your-client_secret
&amp;channel_handle=email adress
&amp;channel_type=valid-email
&amp;link=https://example.com/callback
</code></pre></div></div>

<p><strong>Response</strong></p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">22</span>
<span class="na">Date</span><span class="p">:</span> <span class="s">date-requested</span>
</code></pre></div></div>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"otp sent"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p><strong>Request an access token</strong></p>

<p>The One Time Password grant requires that all of the parameters, including client application defined parameters to be sent in the request body when requesting an access token. Use the <code class="language-plaintext highlighter-rouge">application/x-www-form-urlencoded</code> content type.</p>

<p><code class="language-plaintext highlighter-rouge">POST oauth2/v0/token</code></p>

<p><strong>Post Body</strong></p>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Format</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">client_id</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td><code class="language-plaintext highlighter-rouge">UUID</code></td>
      <td><strong>Required</strong> The client_id as defined in the SAP Concur application management system.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">client_secret</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td><code class="language-plaintext highlighter-rouge">UUID</code></td>
      <td><strong>Required</strong> The client_secret as set by the client owner in the SAP Concur application management system.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">channel_handle</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>-</td>
      <td><strong>Required</strong> The location (email address, phone number) where the one time token should be sent.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">channel_type</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>-</td>
      <td><strong>Required</strong> The type of messaging system to use. Currently only <code class="language-plaintext highlighter-rouge">email</code> is valid</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">scope</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>-</td>
      <td>The scope(s) requested by the client for the token.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">grant_type</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>-</td>
      <td><strong>Required</strong> The grant type being used, specifically for this approach: <code class="language-plaintext highlighter-rouge">otp</code>.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">otp</code></td>
      <td><code class="language-plaintext highlighter-rouge">string</code></td>
      <td>-</td>
      <td><strong>Required</strong> The one-time token provided as a result of the <strong>Send a one time token to the user</strong> method.</td>
    </tr>
  </tbody>
</table>

<p><strong>Request</strong></p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">POST</span> <span class="nn">/oauth2/v0/token</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/x-www-form-urlencoded</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">us.api.concursolutions.com</span>
<span class="na">Connection</span><span class="p">:</span> <span class="s">close</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">437</span>

POST BODY
client_id=your-client_id
&amp;client_secret=your-client_secret
&amp;channel_handle=email adress
&amp;channel_type=valid-email
&amp;scope=app_scope
&amp;grant_type=otp
&amp;otp=one-time-token
</code></pre></div></div>

<p><strong>Response</strong></p>

<div class="language-http highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Date</span><span class="p">:</span> <span class="s">date-requested</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">1490</span>
<span class="na">Connection</span><span class="p">:</span> <span class="s">keep-alive</span>
</code></pre></div></div>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"expires_in"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3600"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"app-scopes"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bearer"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"access_token"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"refresh_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"refresh_token"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oidc_token"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"geolocation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://us.api.concursolutions.com"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h2 id="response-codes-">Response Codes <a name="response_codes"></a></h2>

<h5 id="http-status-returned-by-oauth2">HTTP Status returned by oauth2</h5>

<table>
  <thead>
    <tr>
      <th>HTTP Status</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>200</td>
      <td>OK - Successful call, response is in body.</td>
    </tr>
    <tr>
      <td>400</td>
      <td>Bad Request <code class="language-plaintext highlighter-rouge">(error, error_description, code)</code></td>
    </tr>
    <tr>
      <td>401</td>
      <td>Unauthorized <code class="language-plaintext highlighter-rouge">(error, error_description, code)</code></td>
    </tr>
    <tr>
      <td>403</td>
      <td>Forbidden <code class="language-plaintext highlighter-rouge">(error, error_description, code)</code></td>
    </tr>
    <tr>
      <td>404</td>
      <td>Not Found <code class="language-plaintext highlighter-rouge">(error, error_description, code)</code></td>
    </tr>
    <tr>
      <td>500</td>
      <td>Server Error, error message is in body.</td>
    </tr>
    <tr>
      <td>503</td>
      <td>Server Timed Out, error message is in body.</td>
    </tr>
  </tbody>
</table>

<p>4xx class errors have a JSON response with the following fields</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="err">&lt;number&gt;</span><span class="p">,</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="err">&lt;error&gt;</span><span class="p">,</span><span class="w">
  </span><span class="nl">"error_description"</span><span class="p">:</span><span class="w"> </span><span class="err">&lt;error_description&gt;</span><span class="p">,</span><span class="w">
  </span><span class="nl">"geolocation"</span><span class="p">:</span><span class="w"> </span><span class="err">&lt;geolocation</span><span class="w"> </span><span class="err">url</span><span class="w"> </span><span class="err">where</span><span class="w"> </span><span class="err">user</span><span class="w"> </span><span class="err">lives&gt;</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<h5 id="authorize">/authorize</h5>

<p>If the authorization or authentication are unsuccessful, your application will receive an error code and description at the redirect_uri provided.</p>

<pre><code class="language-Your_Redirect_Uri"> error_code=&lt;&gt;
 &amp;error_description=&lt;&gt;
</code></pre>

<p>In all cases, the friendly error description should be displayed to the user.</p>

<h5 id="token">/token</h5>

<table>
  <thead>
    <tr>
      <th>Code</th>
      <th>Error</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>5</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_grant</code></td>
      <td>Incorrect credentials. Please Retry</td>
    </tr>
    <tr>
      <td>10</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_grant</code></td>
      <td>Account is disabled. Please contact support</td>
    </tr>
    <tr>
      <td>11</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_grant</code></td>
      <td>Account is disabled. Please contact support</td>
    </tr>
    <tr>
      <td>12</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_grant</code></td>
      <td>Logon Denied. Please contact support</td>
    </tr>
    <tr>
      <td>13</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_grant</code></td>
      <td>Logon Denied. Please contact support</td>
    </tr>
    <tr>
      <td>14</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_grant</code></td>
      <td>Account Locked. Please contact support</td>
    </tr>
    <tr>
      <td>16</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td>user lives elsewhere</td>
    </tr>
    <tr>
      <td>19</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_grant</code></td>
      <td>Incorrect credentials. Please Retry</td>
    </tr>
    <tr>
      <td>20</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_grant</code></td>
      <td>Logon Denied. Please contact support (typically due to IP restriction)</td>
    </tr>
    <tr>
      <td>21</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td>Incorrect credentials. SSO-only client attempted a password login.</td>
    </tr>
    <tr>
      <td>51</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td>username was not supplied</td>
    </tr>
    <tr>
      <td>52</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td>password was not supplied</td>
    </tr>
    <tr>
      <td>53</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_client</code></td>
      <td>company is not enabled for this client</td>
    </tr>
    <tr>
      <td>54</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_scope</code></td>
      <td>requested scope exceeds granted scope</td>
    </tr>
    <tr>
      <td>55</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td>we don’t know this email</td>
    </tr>
    <tr>
      <td>56</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td><code class="language-plaintext highlighter-rouge">otp</code> was not supplied</td>
    </tr>
    <tr>
      <td>57</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td><code class="language-plaintext highlighter-rouge">channel_type</code> missing</td>
    </tr>
    <tr>
      <td>58</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td><code class="language-plaintext highlighter-rouge">channel_handle</code> missing</td>
    </tr>
    <tr>
      <td>59</td>
      <td><code class="language-plaintext highlighter-rouge">access_denied</code></td>
      <td>client disabled</td>
    </tr>
    <tr>
      <td>60</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_grant</code></td>
      <td>these are not the grants you are looking for</td>
    </tr>
    <tr>
      <td>61</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_client</code></td>
      <td>client not found</td>
    </tr>
    <tr>
      <td>62</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td><code class="language-plaintext highlighter-rouge">client_id</code> was not supplied</td>
    </tr>
    <tr>
      <td>63</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td><code class="language-plaintext highlighter-rouge">client_secret</code> was not supplied</td>
    </tr>
    <tr>
      <td>64</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_client</code></td>
      <td>Incorrect credentials. Please Retry</td>
    </tr>
    <tr>
      <td>65</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td><code class="language-plaintext highlighter-rouge">grant_type</code> was not supplied</td>
    </tr>
    <tr>
      <td>80</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td>invalid channel type</td>
    </tr>
    <tr>
      <td>81</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td>bad channel handle</td>
    </tr>
    <tr>
      <td>83</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td>otp not found</td>
    </tr>
    <tr>
      <td>84</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td>fact verification failed</td>
    </tr>
    <tr>
      <td>85</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td>otp verification failed</td>
    </tr>
    <tr>
      <td>100</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td>backend does not know about this username</td>
    </tr>
    <tr>
      <td>101</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td>code was not supplied</td>
    </tr>
    <tr>
      <td>102</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td><code class="language-plaintext highlighter-rouge">redirect_uri</code> was not supplied</td>
    </tr>
    <tr>
      <td>103</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td>code is bad or expired</td>
    </tr>
    <tr>
      <td>104</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_grant</code></td>
      <td><code class="language-plaintext highlighter-rouge">redirect_uri</code> does not match the previous grant</td>
    </tr>
    <tr>
      <td>105</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_grant</code></td>
      <td>this grant was not issued to you!</td>
    </tr>
    <tr>
      <td>106</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td><code class="language-plaintext highlighter-rouge">refresh_token</code> was not supplied</td>
    </tr>
    <tr>
      <td>107</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td>refresh disallowed for app</td>
    </tr>
    <tr>
      <td>108</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_grant</code></td>
      <td>bad or expired refresh token</td>
    </tr>
    <tr>
      <td>109</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td><code class="language-plaintext highlighter-rouge">loginid</code> was not supplied</td>
    </tr>
    <tr>
      <td>115</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td>unauthenticated client will not be issued token!</td>
    </tr>
    <tr>
      <td>117</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td>nonce is mandatory for this <code class="language-plaintext highlighter-rouge">response_type</code></td>
    </tr>
    <tr>
      <td>118</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td>display is invalid</td>
    </tr>
    <tr>
      <td>119</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td>prompt is invalid</td>
    </tr>
    <tr>
      <td>119</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td>prompt must be set to consent for <code class="language-plaintext highlighter-rouge">offline_access</code></td>
    </tr>
    <tr>
      <td>120</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td><code class="language-plaintext highlighter-rouge">credtype</code> is invalid</td>
    </tr>
    <tr>
      <td>121</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td><code class="language-plaintext highlighter-rouge">login_type</code> is invalid</td>
    </tr>
    <tr>
      <td>122</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td>proxies supplied are invalid</td>
    </tr>
    <tr>
      <td>123</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td>principal is disabled</td>
    </tr>
    <tr>
      <td>124</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td><code class="language-plaintext highlighter-rouge">product</code> is invalid</td>
    </tr>
    <tr>
      <td>135</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td>unsupported request format</td>
    </tr>
    <tr>
      <td>136</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td>Authtoken was not issued for you</td>
    </tr>
    <tr>
      <td>139</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td>Logon Denied. Password must be changed to meet company policy.</td>
    </tr>
  </tbody>
</table>

<h5 id="otp">/otp</h5>

<table>
  <thead>
    <tr>
      <th>Code</th>
      <th>Error</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>16</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td>user lives elsewhere</td>
    </tr>
    <tr>
      <td>57</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td><code class="language-plaintext highlighter-rouge">channel_type</code> was not supplied</td>
    </tr>
    <tr>
      <td>58</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td><code class="language-plaintext highlighter-rouge">channel_handle</code> was not supplied</td>
    </tr>
    <tr>
      <td>60</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_grant</code></td>
      <td>these are not the grants you are looking for</td>
    </tr>
    <tr>
      <td>61</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_client</code></td>
      <td><code class="language-plaintext highlighter-rouge">client_id</code> is not known to us</td>
    </tr>
    <tr>
      <td>62</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td><code class="language-plaintext highlighter-rouge">client_id</code> was not supplied</td>
    </tr>
    <tr>
      <td>63</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td><code class="language-plaintext highlighter-rouge">client_secret</code> was not supplied</td>
    </tr>
    <tr>
      <td>80</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td>invalid channel type</td>
    </tr>
    <tr>
      <td>81</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td>bad channel handle</td>
    </tr>
    <tr>
      <td>82</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td>the number of open otp requests has been exceeded</td>
    </tr>
    <tr>
      <td>135</td>
      <td><code class="language-plaintext highlighter-rouge">invalid_request</code></td>
      <td>unsupported request format</td>
    </tr>
  </tbody>
</table>

<h2 id="troubleshooting-">Troubleshooting <a name="troubleshooting"></a></h2>

<p>In order to assist with troubleshooting, SAP Concur responds with a unique correlationId in the response header. The key to look for is <code class="language-plaintext highlighter-rouge">correlationid</code>. This unique code can be used during troubleshooting as it identifies the API call in the log files. You should record this information in your own API call logs as well so that you can pass this information on to the SAP Concur support team.</p>

<p>Example of the <code class="language-plaintext highlighter-rouge">correlationid</code> in the response:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt; HTTP/1.1 200 OK
&lt; Server: cnqr-papeete
&lt; Date: Mon, 04 Dec 2017 22:07:05 GMT
&lt; Content-Type: application/json
&lt; Content-Length: 2897
&lt; Connection: keep-alive
&lt; Concur-Correlationid: 2803b8f8-a42b-43c2-a739-b8768e4759b8
</code></pre></div></div>

<h2 id="enterprise-business-applications-">Enterprise Business Applications <a name="enterprise-business-applications"></a></h2>

<p>Only the <a href="#password_grant">Password Grant Type</a> is available for obtaining company-level tokens.</p>

<ol>
  <li>To begin the authentication flow, a Customer’s SAP Concur Administrator clicks on the Connect button within the App Center listing and authorizes the partner’s app.  This app listing is located within customer’s SAP Concur system’s App Center tab.</li>
  <li>The SAP Concur authorization service will redirect the Admin to the Partner’s Landing Page.  Partners should follow the <a href="https://developer.concur.com/manage-apps/go-market-docs/app-center-ux-guidelines-enterprise.html">App Center UX Guidelines</a> to create a web page that listens for an HTTP GET request from SAP Concur.</li>
  <li>The redirect URI will contain an id, requestToken and userId parameters.  Example: <code class="language-plaintext highlighter-rouge">https://{partner_redirect_URI}?id=8568a4cd-8ffc-49d6-9417-be2d69aa075f&amp;requestToken=5l85ae5a-426f-4d6f-8af4-08648c4b696b&amp;userId=9bdded51-00b8-4f84-8bef-6d3afe727007</code></li>
  <li>When the Partner application receives the redirect call, the Partner should strip the <code class="language-plaintext highlighter-rouge">id</code> and <code class="language-plaintext highlighter-rouge">requestToken</code> values from the URI and use those on a Post request to the SAP Concur Authorization service to obtain the official Oauth2 Access Token and Refresh Token for the customer using the <a href="https://developer.concur.com/api-reference/authentication/apidoc.html#password_grant">password grant</a>. We currently have 3 Data Centers and the API end points change based on these Data Centers so it is imperative the proper token management is followed.  Otherwise, your app will not make the correct call per Access token.</li>
  <li>An access token is valid for only one hour.  The access token should be cached in memory and discarded after use.</li>
  <li>After the Admin has successfully completed the login/enrollment process, the Partner should store the following elements with the customer’s profile metadata.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">refresh_token</code>: Valid for six months from the day and time issued.</li>
      <li><code class="language-plaintext highlighter-rouge">refresh_expires_in</code>: This is Epoch time format, convert to UTC.</li>
      <li><code class="language-plaintext highlighter-rouge">geolocation</code>: To be used when making API calls on behalf of the customer.</li>
      <li><code class="language-plaintext highlighter-rouge">id</code>: Aka <code class="language-plaintext highlighter-rouge">sub</code>, is the customer’s unique identifier (UUID).  It can be retrieved from the following sources:</li>
    </ul>
    <ul>
      <li>From the re-direct URI as the id element.</li>
      <li>By decoding the <code class="language-plaintext highlighter-rouge">id_token</code> returned with Access token, as the <code class="language-plaintext highlighter-rouge">sub</code> element. (See https://jwt.io)</li>
    </ul>
  </li>
  <li>It is highly recommended that Partners log the following elements:
    <ul>
      <li><code class="language-plaintext highlighter-rouge">userId</code>: the user who clicked on the Connect button (returned in the re-direct URI)</li>
      <li><code class="language-plaintext highlighter-rouge">correlationid</code>: SAP Concur responds with a unique code which identifies the API call in the log files.  (returned in the response header).  More details can be found here.</li>
    </ul>
  </li>
</ol>

      </div>
      <!--/col-md-8-->
      
      <div id="markdown-toc"
           class="col-md-2 markdown-toc">
        <div class="markdown-toc-header">
    <h4>On this page</h4>
</div>
<div class="markdown-toc-content">
</div>

      </div>
      <!--/col-md-1-->
      
    </div>
    <!--/row-->
  </div>
  <!--/container-->

  <!-- TOCBOT -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.11.1/tocbot.min.js"></script>

<script>
  tocbot.init({
    // Where to render the table of contents.
    tocSelector: '.markdown-toc-content',
    // Where to grab the headings to build the table of contents.
    contentSelector: '.markdown-body',
    // Which headings to grab inside of the contentSelector element.
    headingSelector: 'h1, h2',
    // For headings inside relative or absolute positioned containers within content.
    hasInnerContainers: false,
  });
</script>


    </div>

    <footer class="hidden-print"
        id="footer">
  <div class="col-md-8 footer-copyright">
    <p>
      &copy;
      <script type="text/javascript">
        document.write(new Date().getFullYear());
      </script>
      All Rights Reserved.
      <a href="https://www.concur.com/en-us/privacy-policy">Privacy Policy</a> |
      <a href="/terms-of-use-2021.html">Terms of Use</a> |
      <a href="/tools-support/deprecation-policy.html">API Deprecation Policy</a> |
      <a href="/legal-disclosure.html">Legal Disclosure</a> |
      <a href="https://github.com/SAP-docs/preview.developer.concur.com/blob/main/src/api-reference/authentication/apidoc.markdown">Edit this page on GitHub</a>
    </p>
  </div>

  <!-- Social Links -->
  <div class="col-md-4 footer-social">
    <ul class="list-inline social-icons">
      <li>
        <a href="https://www.facebook.com/SAPConcur"
           target="_blank">
          <span class="sr-only">Facebook</span>
          <span class="fa-stack fa-lg">
            <i class="fas fa-circle fa-stack-2x"></i>
            <i class="fab fa-facebook-f fa-stack-1x fa-inverse"></i>
          </span>
        </a>
      </li>
      <li>
        <a href="https://www.linkedin.com/company/5822"
           target="_blank">
          <span class="sr-only">LinkedIn</span>
          <span class="fa-stack fa-lg">
            <i class="fas fa-circle fa-stack-2x"></i>
            <i class="fab fa-linkedin-in fa-stack-1x fa-inverse"></i>
          </span>
        </a>
      </li>
      <li>
        <a href="https://twitter.com/sapconcur"
           target="_blank">
          <span class="sr-only">Twitter</span>
          <span class="fa-stack fa-lg">
            <i class="fas fa-circle fa-stack-2x"></i>
            <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
          </span>
        </a>
      </li>
      <li>
        <a href="https://www.youtube.com/playlist?list=PLLNSVdjqNPVseaDkR5hSF4CDjnlLK7_nq"
           target="_blank">
          <span class="sr-only">Youtube</span>
          <span class="fa-stack fa-lg">
            <i class="fas fa-circle fa-stack-2x"></i>
            <i class="fab fa-youtube fa-stack-1x fa-inverse"></i>
          </span>
        </a>
      </li>
    </ul>
  </div>
  <!-- End Social Links -->
</footer>
<!--/.footer-->

  </div>
  <!--/wrapper-->

  <!-- JS Global Compulsory -->
<script type="text/javascript" src="/assets/plugins/jquery/jquery.min.js"></script>
<script type="text/javascript" src="/assets/plugins/jquery/jquery-migrate.min.js"></script>
<script type="text/javascript" src="/assets/plugins/bootstrap/js/bootstrap.min.js"></script>

<!-- Adobe Analytics Global-->
<script src="https://assets.adobedtm.com/e1226b306979/aeb854337dc8/launch-85c98625c1e8.min.js" async></script>

<!-- Swagger -->
<!-- <script src="/swagger-ui/lib/jquery-1.8.0.min.js" type="text/javascript"></script> -->



<script>
  var replacementURL = "preview.developer.concur.com/api-explorer-proxy";
</script>



<!-- JS Implementing Plugins -->
<script type="text/javascript" src="/assets/plugins/back-to-top.js"></script>
<!-- JS Page Level -->
<script type="text/javascript" src="/assets/js/app.js"></script>
<script type="text/javascript">
  jQuery(document).ready(function() {
    App.init();
  });
</script>

<script>
  var oHeader = document.getElementById("header-navbar");
  var oContent = document.getElementById("main-content");
  var oFooter = document.getElementById("footer");

  // Set content overall height
  var iNewHeight = oContent.offsetHeight - (oHeader.offsetHeight + oFooter.offsetHeight);
  var sHeight = "" + iNewHeight + "px";
  oContent.style.height = sHeight;

  // Set Triple component heights.
  // var oBreadcrumb = document.getElementById("breadcrumbs");
  var oLeftNav = document.getElementById("left-navigation");
  var oMDContent = document.getElementById("markdown-body");
  var oMDToc = document.getElementById("markdown-toc");
  var iViewWidth = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0)

  // Widths are 2-8-2 or 2-10 if no MDToc
  var sWidth;
  if (iViewWidth < 989) {
    if (!!oLeftNav) {
      oLeftNav.style.height = 100;
      sWidth = "" + (window.innerWidth * 0.950) + "px";
      oLeftNav.style.maxWidth = sWidth;
    }
  } else {
    if (!!oLeftNav) {
      oLeftNav.style.height = sHeight;
      sWidth = "" + (window.innerWidth * 0.166) + "px";
      oLeftNav.style.maxWidth = sWidth;
    }
    if (!!oMDContent) {
      oMDContent.style.height = sHeight;
      if (!!oMDToc) {
        // 8 / 12
        sWidth = "" + (window.innerWidth *0.66) + "px";
        oMDContent.style.maxWidth = sWidth;
      } else {
        // 10 / 12
        oMDContent.style.maxWidth = window.innerWidth * 0.833;
        sWidth = "" + (window.innerWidth * 0.833) + "px";
        oMDContent.style.maxWidth = sWidth;
      }
    }
    if (!!oMDToc) {
      oMDToc.style.height = sHeight;
      sWidth = "" + (window.innerWidth * 0.166) + "px";
      oMDToc.style.maxWidth = sWidth;
    }
  }
</script>


</body>

</html>
