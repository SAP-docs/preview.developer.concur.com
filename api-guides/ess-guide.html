<!DOCTYPE html>
<html lang="en">

<head>
  


  <title> SAP Concur Developer Center | Event Subscription Service v4 Guide</title>


<!-- Meta -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="The starting point for anyone interested in integrating with the SAP Concur platform that reaches 80 million end users.">
<meta name="author" content="">

<!-- Sitemap link -->
<link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml" />

<!-- Favicon -->
<link rel="shortcut icon" href="/assets/img/square-sap-favicon.png" type="image/png">

<!-- Adobe Analytics Global-->
<script src="https://assets.adobedtm.com/e1226b306979/aeb854337dc8/launch-85c98625c1e8.min.js" async></script>

<!-- Canonical link-->
<link rel="canonical" href="https://preview.developer.concur.com/api-guides/ess-guide.html" data-proofer-ignore>

<!-- CSS Global Compulsory -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400">
<link rel="stylesheet" href="/assets/style.css">

<!-- CSS Implementing Plugins -->
<link rel="stylesheet" href="/assets/plugins/font-awesome/css/all.min.css">



<link rel="alternate" type="application/rss+xml" title="SAP Concur Developer Center RSS" href="/feed.xml" />

</head>

<body>


  <div class="wrapper page-option-v1">
    <div class="hidden-print">
  <nav id="header-navbar" class="navbar navbar-inverse hidden-print">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header col-6">
        <button type="button" class="navbar-toggle collapsed" style="color: white" data-toggle="collapse" data-target="#nav-collapse-1" aria-expanded="false">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/">
          <img src="/assets/img/sap-concur-logo-white.png" alt="Logo">
          <div class="app-name">Developer Center</div>
        </a>
      </div>
      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse col-6" id="nav-collapse-1">
        <ul class="nav navbar-nav navbar-right" style="padding-top: 9px">
          <!-- Development -->
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" style="color: white" role="button" aria-haspopup="true">
              Development <span class="caret"></span>
            </a>
            <ul class="dropdown-menu multi-column three-column-menu">
              <div class="row">
                <div class="col-sm-4">
                  <ul class="multi-column-dropdown">
                    <li class="column-icon">
                      <span class="fa-stack fa-lg">
                        <i class="fas fa-circle fa-stack-2x"></i>
                        <i class="fas fa-map-marked-alt fa-stack-1x fa-inverse"></i>
                      </span>
                    </li>
                    <li class="column-title">About</li>
                    <li><a href="/getting-started.html">Getting Started</a></li>
                    <li><a href="/api-reference/authentication/getting-started.html">Authentication</a></li>
                    <li><a href="/platform/index.html">Platform</a></li>
                    <li><a href="/tools-support/deprecation-policy.html">API Deprecation</a></li>
                  </ul>
                </div>
                <div class="col-sm-4">
                  <ul class="multi-column-dropdown">
                    <li class="column-icon">
                      <span class="fa-stack fa-lg">
                        <i class="fas fa-circle fa-stack-2x"></i>
                        <i class="fas fa-book fa-stack-1x fa-inverse"></i>
                      </span>
                    </li>
                    <li class="column-title">Documentation</li>
                    <li><a href="/api-reference/">API Reference</a></li>
                    <li><a href="/api-explorer/">API Explorer</a></li>
                    <li><a href="/api-guides/">API Guides</a></li>
                    <li><a href="/event-topics/">Event Topics</a></li>
                  </ul>
                </div>
                <div class="col-sm-4">
                  <ul class="multi-column-dropdown">
                    <li class="column-icon">
                      <span class="fa-stack fa-lg">
                        <i class="fas fa-circle fa-stack-2x"></i>
                        <i class="fas fa-clipboard-list fa-stack-1x fa-inverse"></i>
                      </span>
                    </li>
                    <li class="column-title">UX Guidelines</li>
                    <li><a href="/manage-apps/go-market-docs/app-center-ux-guidelines-enterprise.html">Enterprise Applications</a></li>
                    <li><a href="/manage-apps/go-market-docs/app-center-ux-guidelines-consumer.html">User Connections</a>
                    </li>
                  </ul>
                </div>
              </div>
            </ul>
          </li>
          <!-- Partner Resources -->
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" style="color: white" aria-haspopup="true" aria-expanded="false">
              Partner Resources <span class="caret"></span>
            </a>
            <ul class="dropdown-menu">
              <li class="column-icon">
                <span class="fa-stack fa-lg">
                  <i class="fas fa-circle fa-stack-2x"></i>
                  <i class="fas fa-lightbulb fa-stack-1x fa-inverse"></i>
                </span>
              </li>
              <li class="column-title">Partner Resources</li>
              <li><a href="/manage-apps/app-certification.html">App Certification</a></li>
              <li><a href="/manage-apps/partner-applications.html">App Registration & Management</a></li>
              <li><a href="/manage-apps/redirect.html">Go to Market</a></li>
              <li><a href="https://www.concur.com/en-us/app-center" target="_blank">App Center</a></li>
              <li><a href="https://www.concursolutions.com/" target="_blank">Login to Concur</a></li>
            </ul>
          </li>
          <!-- Support -->
          <li
            class="dropdown">
            <a href="#" class="dropdown-toggle" style="color: white" data-toggle="dropdown" role="button" aria-haspopup="true">
              Support <span class="caret"></span>
            </a>
            <ul class="dropdown-menu multi-column two-column-menu">
              <div class="row">
                <div class="col-sm-6">
                  <ul class="multi-column-dropdown">
                    <li class="column-icon">
                      <span class="fa-stack fa-lg">
                        <i class="fas fa-circle fa-stack-2x"></i>
                        <i class="fas fa-question fa-stack-1x fa-inverse"></i>
                      </span>
                    </li>
                    <li class="column-title">Support</li>
                    <li><a href="/tools-support/support.html">Support Options</a></li>
                    <li><a href="https://open.concur.com/" target="_blank">Service Status</a></li>
                  </ul>
                </div>
                <div class="col-sm-6">
                  <ul class="multi-column-dropdown">
                    <li class="column-icon">
                      <span class="fa-stack fa-lg">
                        <i class="fas fa-circle fa-stack-2x"></i>
                        <i class="fas fa-bullhorn fa-stack-1x fa-inverse"></i>
                      </span>
                    </li>
                    <li class="column-title">Bulletin</li>
                    <li><a href="/tools-support/release-notes/index.html">Release Notes</a></li>
                  </ul>
                </div>
              </div>
            </ul>
          </li>
          <!-- Search -->
          <li>
            <a href="#" class="search">
              <span class="sr-only">Search</span>
              <i class="fas fa-search search-btn" style="color:white;"></i>
            </a>
            <div class="search-open">
              <div class="input-group animated fadeInDown">
                <form method="GET" action="/search.html" id="searchbox_000165422556797149853:qlbg8re_3tu">
                  <input value="000165422556797149853:qlbg8re_3tu" name="cx" type="hidden">
                  <input value="FORID:11" name="cof" type="hidden"> <!-- FORID values configure ad positions -->
                  <div class="input-group">
                    <label for="q" hidden>Search</label>
                    <input type="text" id="q" class="form-control" name="q" placeholder="Search">
                    <span class="input-group-btn">
                      <button type="submit" class="btn bright-blue">Go</button>
                    </span>
                  </div>
                </form>
              </div>
            </div>
          </li>
        </ul> <!-- /.navbar-nav -->
      </div> <!-- /.navbar-collapse -->
  </nav> <!-- /.navbar -->
</div>


    <div id="main-content"
         class="main-content">
      <div class="container-fluid content">
  <div class="row">
    <div id="left-navigation"
         class="col-md-2 left-navigation">
      







<ul class="list-group sidebar-nav-v1 hidden-print" id="sidebar-nav">





  
    <li class="list-group-item ">
      <a href="/api-guides/">Integration Guides</a>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-attendees">
        Attendees
      </a>
      <ul id="collapse-attendees" class="collapse ">
        
          <li >
            <a href="/api-guides/attendees/external-attendees-to-expense-entries.html">Expense - Associating External Attendees to Expense Entries</a>
          </li>
        
      </ul>
    </li>

  



  
    <li class="list-group-item ">
      <a href="/api-guides/e-receipts.html">eReceipts Integration</a>
    </li>

  



  
    <li class="list-group-item active">
      <a href="/api-guides/ess-guide.html">Event Subscription Service v4 Guide</a>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-expense">
        Expense
      </a>
      <ul id="collapse-expense" class="collapse ">
        
          <li >
            <a href="/api-guides/expense/cost-object-workflow-integration.html">Cost Object Workflow Integration</a>
          </li>
        
          <li >
            <a href="/api-guides/expense/deeplink-url.html">Deeplink URL</a>
          </li>
        
          <li >
            <a href="/api-guides/expense/mexico-cfdi-integration.html">Mexico CFDI Integration Guide</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-erp-integration">
        ERP Integration
      </a>
      <ul id="collapse-erp-integration" class="collapse ">
        
          <li >
            <a href="/api-guides/ERP-integration/erp-integration.html">ERP Integrations</a>
          </li>
        
          <li >
            <a href="/api-guides/ERP-integration/posting-via-financial-integration-service.html">Financial Posting via Financial Integration Service</a>
          </li>
        
          <li >
            <a href="/api-guides/ERP-integration/posting-via-extracts.html">Financial Posting via Extracts</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-invoice">
        Invoice
      </a>
      <ul id="collapse-invoice" class="collapse ">
        
          <li >
            <a href="/api-guides/invoice/payment-provider-integration.html">Payment Provider Integration - paying customers' invoices</a>
          </li>
        
      </ul>
    </li>

  



  
    <li class="list-group-item ">
      <a href="/api-guides/preproduction-testing.html">Testing App Center Partner Applications</a>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-profile">
        Profile
      </a>
      <ul id="collapse-profile" class="collapse ">
        
          <li >
            <a href="/api-guides/profile/identity-search.html">Identity v4.1 Search Guide</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-request">
        Request
      </a>
      <ul id="collapse-request" class="collapse ">
        
          <li >
            <a href="/api-guides/request/deeplink-url-request.html">Deeplink URL Integration</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-tmc">
        TMC
      </a>
      <ul id="collapse-tmc" class="collapse ">
        
          <li >
            <a href="/api-guides/tmc/tmc-overview.html">TMC Guide Overview</a>
          </li>
        
          <li >
            <a href="/api-guides/tmc/itinerary-v1-guide.html">Guide to the Itinerary v1.0 API, TMC Edition</a>
          </li>
        
          <li >
            <a href="/api-guides/tmc/profile-v2-guide.html">Guide to the Profile v2.0 API, TMC Edition</a>
          </li>
        
          <li >
            <a href="/api-guides/tmc/receipts-v4-guide.html">Guide to the Receipts v4.0 API, TMC Edition</a>
          </li>
        
          <li >
            <a href="/api-guides/tmc/request-v4-guide.html">Guide to the Request v4.0 API, TMC Edition</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-travel">
        Travel
      </a>
      <ul id="collapse-travel" class="collapse ">
        
          <li >
            <a href="/api-guides/travel/deeplink-integration.html">Deep Link Integration</a>
          </li>
        
          <li >
            <a href="/api-guides/travel/duty-of-care.html">Duty of Care</a>
          </li>
        
          <li >
            <a href="/api-guides/travel/get-itinerary.html">Itinerary - GET Itinerary & Trip Details</a>
          </li>
        
          <li >
            <a href="/api-guides/travel/new-itinerary-manual.html">Itinerary - Add a New Itinerary Manually</a>
          </li>
        
          <li >
            <a href="/api-guides/travel/itin-with-events.html">Itinerary - Business Travel Events</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-user-provisioning">
        User Provisioning
      </a>
      <ul id="collapse-user-provisioning" class="collapse ">
        
          <li >
            <a href="/api-guides/user-provisioning/user-provisioning.html">User Provisioning</a>
          </li>
        
      </ul>
    </li>

  



  
    <li class="list-group-item ">
      <a href="/api-guides/vat-reclaim/vat-reclaim-guide.html">VAT Reclaim Integration</a>
    </li>

  



</ul>

    </div>
    <!--/col-md-3-->

    
      <div id="markdown-body"
           class="col-md-8 markdown-body">
        

        <h1 id="event-subscription-service-v4-guide">Event Subscription Service v4 Guide</h1>

<p>This guide will help you develop applications using the Event Subscription Service (ESS). The audience is:</p>

<ul>
  <li>SAP Concur App Center Partners</li>
  <li>SAP Concur Web Service Customers/Clients</li>
  <li>TMC Partners (using our Request V4 APIs)</li>
</ul>

<p>It provides the detailed steps required to set up/create an Event Subscription for your App and other related processes, in order to begin receiving SAP Concur events of a Company/Customer/Client into your webhook or endpoint.</p>

<p>The following diagram gives a high-level overview of the steps involved for the different parties:</p>

<p><img src="/api-guides/images/set-up-ess.png" alt="High-level steps to set up an Event Subscription &amp; begin receiving events" /></p>

<h2 id="step-1--perform-checks">Step 1 – Perform Checks</h2>

<p>You may need to request access from your SAP Concur representative if you do not have the necessary permissions.</p>
<ul>
  <li>Ensure your App (<code class="language-plaintext highlighter-rouge">client_id</code> + <code class="language-plaintext highlighter-rouge">client_secret</code>) has access to the following grant types:
    <ul>
      <li>Client Credentials</li>
      <li>Password</li>
    </ul>
  </li>
  <li>
    <p>Ensure your App has access to the required scopes:</p>

    <table>
      <thead>
        <tr>
          <th>App Scopes</th>
          <th>Required For</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code class="language-plaintext highlighter-rouge">document.tax.compliance.read</code></td>
          <td>Document Tax Compliance Event</td>
        </tr>
        <tr>
          <td><code class="language-plaintext highlighter-rouge">events.topic.read</code></td>
          <td>All Topics</td>
        </tr>
        <tr>
          <td><code class="language-plaintext highlighter-rouge">expense.report.read</code></td>
          <td>Concur Expense Event</td>
        </tr>
        <tr>
          <td><code class="language-plaintext highlighter-rouge">expense.report.readwrite</code></td>
          <td>Concur Expense Event</td>
        </tr>
        <tr>
          <td><code class="language-plaintext highlighter-rouge">FISVC</code></td>
          <td>Ready for Integration Events</td>
        </tr>
        <tr>
          <td><code class="language-plaintext highlighter-rouge">identity.user.event.read</code></td>
          <td>Identity Change Event</td>
        </tr>
        <tr>
          <td><code class="language-plaintext highlighter-rouge">spend.user.event.read</code></td>
          <td>Spend Change Event</td>
        </tr>
        <tr>
          <td><code class="language-plaintext highlighter-rouge">travel.itinerary.read</code></td>
          <td>Concur Itinerary Event</td>
        </tr>
        <tr>
          <td><code class="language-plaintext highlighter-rouge">travelrequest.write</code></td>
          <td>Concur Request Event, Concur Travel Search Event</td>
        </tr>
        <tr>
          <td><code class="language-plaintext highlighter-rouge">travel.user.event.read</code></td>
          <td>Travel Change Event</td>
        </tr>
        <tr>
          <td><code class="language-plaintext highlighter-rouge">user.provision.read</code></td>
          <td>Concur User Provisioning Event</td>
        </tr>
      </tbody>
    </table>

    <p>The SAP Concur products that ESS supports are constantly evolving. Please refer to <a href="/event-topics/index.html">the main Event Topics page</a> for a list of current available Event Topics.</p>
  </li>
  <li>Ensure your webhook or endpoint meets these <a href="/api-reference/ess/v4.event-subscription.html#endpoint-requirements-">requirements</a>. Endpoint need not be safelisted.</li>
</ul>

<p>For the above checks on your App, you need to ask your SAP Concur representative to make sure that access has been provided for the required grant types and scopes. You may also verify this yourself via Step 2. If the Auth API gives you a 200 OK, the API response will list all included scopes. If required scopes are missing or if the API fails, please reach out to your SAP Concur representative.</p>

<h2 id="step-2--obtain-app-tokens">Step 2 – Obtain App Token(s)</h2>

<ul>
  <li>Using your App credentials (<code class="language-plaintext highlighter-rouge">client_id</code> &amp; <code class="language-plaintext highlighter-rouge">client_secret</code>) and our Authentication API,  make a call using the <a href="/api-reference/authentication/apidoc.html#client-credentials-grant-"><code class="language-plaintext highlighter-rouge">client_credentials</code></a> grant type.</li>
  <li>The token generated in the API response is your App token and will need to be used only for making ESS API calls (details in upcoming steps).</li>
  <li>
    <p>This Auth call needs to be made separately for both our US and EMEA data centers. In other words, 2 separate tokens are required for creating event subscriptions in the two data centers.</p>

    <p><img src="/api-guides/images/ess-us-auth.png" alt="Sample screenshot of Auth request call in US data center" /></p>

    <p><img src="/api-guides/images/ess-emea-auth.png" alt="Sample screenshot of Auth request call in EMEA data center" /></p>
  </li>
</ul>

<h2 id="step-3--create-event-subscriptions">Step 3 – Create Event Subscription(s)</h2>

<ul>
  <li>
    <p>Using the App token(s) from Step 2, make the following PUT API call(s) to <a href="/event-topics/index.html#create-a-subscription">create new Event Subscriptions</a> in both US and EMEA data centers.</p>

    <p><img src="/api-guides/images/ess-us-put.png" alt="Sample screenshot of ESS PUT request call in US data center" /></p>

    <p><img src="/api-guides/images/ess-emea-put.png" alt="Sample screenshot of ESS PUT request call in EMEA data center" /></p>
  </li>
</ul>

<p><strong>Request body explained</strong>:</p>

<ul>
  <li>“id” – You can provide any unique name for your Subscription. Suggestion would be to include integration name, Concur product name, dev/prod environment, data center, etc. for easy identification and troubleshooting.</li>
  <li>“filter” – This can be later used to specify eventTypes to filter out events of your choice.</li>
  <li>“topic” – Use the one that applies to your integration:
    <ul>
      <li><code class="language-plaintext highlighter-rouge">public.concur.travel.itinerary</code></li>
      <li><code class="language-plaintext highlighter-rouge">public.concur.expense.report</code></li>
      <li><code class="language-plaintext highlighter-rouge">public.concur.request</code></li>
      <li><code class="language-plaintext highlighter-rouge">public.concur.user.profile.identity</code></li>
      <li><code class="language-plaintext highlighter-rouge">public.concur.user.provisioning</code></li>
    </ul>
  </li>
  <li>“endpoint” – Webhook where Concur Events are required to be delivered.</li>
</ul>

<blockquote>
  <p>Note : Please refer to this <a href="/event-topics/index.html">page</a> for a list of all our current available Event Topics.</p>
</blockquote>

<p>On receiving a success message for the PUT API call, the Event Subscription(s) is successfully created.</p>

<h2 id="step-4--view-the-newly-created-subscription-optional">Step 4 – View the Newly Created Subscription (Optional)</h2>

<p>Use the App token of the correct data center (from Step 2) to perform a <a href="/event-topics/index.html#browse-existing-subscriptions">GET call</a>. A new event subscription will look like the following:</p>

<p><img src="/api-guides/images/step-4.png" alt="Sample screenshot of ESS PUT request call in US data center" /></p>

<p><strong>Important Notes</strong></p>

<ul>
  <li>Steps 1, 2, and 3 in combination, is a one-time process based on the nature of your integration or the requirements of the event topic.</li>
  <li>The above steps must be performed before moving forward with the steps below.</li>
  <li>In addition to using the App token (from Step 2) for the PUT ESS API call, this token can also be used for other ESS calls like verifying (GET) the created subscription, deleting (DELETE) the subscription, etc. Details available <a href="/event-topics/index.html#verify-your-subscription">here</a>.</li>
  <li>If you need to update an existing event subscription, PUT ESS API call must be used with the correct subscription “id”. If the “id” is different, a new subscription will be created.</li>
  <li>The App token is used only for ESS API endpoints.</li>
</ul>

<p>Now, to begin receiving Concur Events of a Company/Concur entity, the Company ID/UUID of this entity must be related or connected to your App (by obtaining a Company JWT/token), which will then ensure that this UUID is automatically added to the Event Subscription you just created.</p>

<p><img src="/api-guides/images/ess-subscription.png" alt="Connecting your ESS subscription" /></p>

<p>Please refer to the section applicable to you in the step below on how to obtain a Company JWT/Token.</p>

<h2 id="step-5--obtain-company-jwttoken-connecting-a-company-to-your-app">Step 5 – Obtain Company JWT/Token (Connecting a Company to Your App)</h2>

<h3 id="web-service-customers">Web Service Customers</h3>

<p>You need to connect your SAP Concur company/entity to your own app, which will automatically then update your newly created event subscription with your SAP Concur Company UUID.</p>

<p>This connection is achieved via the Authentication Admin tool within your entity and then making an API request to exchange the Request token for an Access Token that is valid only for your entity (i.e., company-level token/JWT).</p>

<ol>
  <li>Company Admin navigates to the <strong>Administration &gt; Company &gt; Authentication Admin</strong> page.</li>
  <li>Select the <strong>Company Request Token</strong> link and on this page, enter your <code class="language-plaintext highlighter-rouge">client_id</code> in the App ID field and submit.</li>
  <li>A dialog box appears displaying the Company UUID and the Company Request Token (Username and Password).</li>
  <li>
    <p>Use these info to obtain a Company JWT/token with the help of our Auth API (Password grant type). The API steps to obtain this JWT are detailed on the Company Request Token page.</p>

    <p>More information on the <a href="/api-reference/authentication/company-refresh-tool.html">Company Request Tool</a> page.</p>

    <p><img src="/api-guides/images/ess-company-request-token.png" alt="Screenshot of the Company Request Tokens page" /></p>
  </li>
  <li>After you have obtained a Company JWT successfully, proceed to Step 6.</li>
</ol>

<h3 id="app-center-partners">App Center Partners</h3>

<p>When a Customer/Company Admin clicks the <strong>Connect</strong> button from the App Center and successfully establishes a connection to your App, this will automatically update the event subscription, that you created, with the Company UUID.</p>

<p>Successful connection implies you successfully obtained a Company JWT/token for this Customer.</p>

<ol>
  <li>Company Admin navigates to the App Center and clicks the <strong>Connect</strong> button from your App listing page.</li>
  <li>The admin is redirected to your landing page.</li>
  <li>From the URL of the landing page, you are able to get the the Company UUID and the Company Request Token (Username and Password).</li>
  <li>
    <p>Use these info to obtain a Company JWT/token with the help of our Company Auth API (<a href="/api-reference/authentication/company-auth.html">Password grant type</a>), after the admin submits required info on the landing page.</p>

    <p><img src="/api-guides/images/ess-app-center.png" alt="Screenshot of App Center connection" /></p>
  </li>
  <li>After you have obtained a Company JWT successfully, proceed to Step 6.</li>
</ol>

<h3 id="tmc-partners-using-request-v4-apis">TMC Partners (using Request V4 APIs)</h3>

<p>There is one more important step that SAP Concur Admins working with TMCs or TMCs having access to an SAP Concur site should take care of, before obtaining a Company JWT/token.</p>

<p>Since a Client can have different Travel Agency Offices, it is necessary to ensure that only those Concur Request events that belong to specific Travel Agency Offices (identified using Agency UUIDs) are delivered to the TMC App.</p>

<p>Within the Event Subscription, there is a ‘Groups’ field that should contain only such Agency UUIDs. This is achieved by performing the following steps, which will then later ensure that the Agency UUID(s) is automatically added to the event subscription once a Company JWT is generated:</p>

<ol>
  <li>Within a Client’s SAP Concur entity, a Request Admin to navigate to <strong>Administration → Request → Travel Agency Offices</strong></li>
  <li>Select the required Travel Agency Office (the Agency UUID of which needs to be included within the ‘groups’ in the Event subscription) from the list. And double-click or click <strong>Modify</strong>.</li>
  <li>In the <code class="language-plaintext highlighter-rouge">appId</code> field, enter the TMC’s App ID/UUID (<code class="language-plaintext highlighter-rouge">client_id</code>) and click <strong>Done</strong>.</li>
  <li>
    <p>Repeat, if there are more Agency UUIDs that need to be included.</p>

    <p><img src="/api-guides/images/ess-tmc.png" alt="Screenshot showing adding TMCs" /></p>
  </li>
  <li>After the above steps, Admin may navigate to <strong>Administration &gt; Company &gt; Authentication Admin</strong> page and select the Company Request Token link on this page in order to generate a Request Token. Or can request the SAP Concur representative to help generate a Request Token on your behalf.</li>
  <li>Detailed steps on how to use the Request token and Company UUID to obtain a <a href="/api-reference/authentication/company-refresh-tool.html">Company JWT/token</a>.</li>
  <li>After you have obtained a Company JWT successfully, proceed to Step 6.</li>
</ol>

<h2 id="step-6--verification-of-the-event-subscription">Step 6 – Verification of the Event Subscription</h2>

<p>If a Company JWT has been successfully obtained, this implies that the Company UUID (and Agency UUID for TMCs) have been automatically added to the Event Subscription. And only if these UUIDs exist in the Event Subscription, will we begin delivering events to your endpoint.</p>

<p>Hence, this last step can be used to verify the existence of these UUIDs in the Subscription. The <a href="/event-topics/index.html#browse-existing-subscriptions">GET ESS API</a> call must be used with the App Token (from Step 2). Perform this separately for US and EMEA data centers.</p>

<p>Verify that:</p>

<ul>
  <li>Company UUID is listed in the <strong>companyIds</strong> array of the subscription.</li>
  <li>
    <p>Agency UUID is listed in the <strong>groups</strong> array of the subscription (only for TMCs).</p>

    <p><img src="/api-guides/images/step-6.png" alt="Screenshot of GET call" /></p>
  </li>
</ul>

<p>Based on SAP Concur product activity, you should now begin to see events coming through to your webhook! Sample Event payloads can be found within the respective <a href="/event-topics/">Topic</a>.</p>

<p>Click the button below to download the ESS API collection in Postman.</p>

<p><a href="https://app.getpostman.com/run-collection/31374415-d70ee8d6-46cb-40db-b3b9-fc54524f8b45?action=collection%2Ffork&amp;source=rip_markdown&amp;collection-url=entityId%3D31374415-d70ee8d6-46cb-40db-b3b9-fc54524f8b45%26entityType%3Dcollection%26workspaceId%3D2a9e2e42-656a-474c-b78a-1b6be9959a2e"><img src="https://run.pstmn.io/button.svg" alt="Run In Postman" style="width: 128px; height: 32px;" /></a></p>

<p>Or you may download the <a href="/api-guides/postman/ESS%20API%20endpoints.postman_collection.zip">JSON collection</a>.</p>

      </div>
      <!--/col-md-8-->
      
      <div id="markdown-toc"
           class="col-md-2 markdown-toc">
        <div class="markdown-toc-header">
    <h4>On this page</h4>
</div>
<div class="markdown-toc-content">
</div>

      </div>
      <!--/col-md-1-->
      
    </div>
    <!--/row-->
  </div>
  <!--/container-->

  <!-- TOCBOT -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.11.1/tocbot.min.js"></script>

<script>
  tocbot.init({
    // Where to render the table of contents.
    tocSelector: '.markdown-toc-content',
    // Where to grab the headings to build the table of contents.
    contentSelector: '.markdown-body',
    // Which headings to grab inside of the contentSelector element.
    headingSelector: 'h1, h2',
    // For headings inside relative or absolute positioned containers within content.
    hasInnerContainers: false,
  });
</script>


    </div>

    <footer class="hidden-print"
        id="footer">
  <div class="col-md-8 footer-copyright">
    <p>
      &copy;
      <script type="text/javascript">
        document.write(new Date().getFullYear());
      </script>
      All Rights Reserved.
      <a href="https://www.concur.com/en-us/privacy-policy">Privacy Policy</a> |
      <a href="/terms-of-use-2021.html">Terms of Use</a> |
      <a href="/tools-support/deprecation-policy.html">API Deprecation Policy</a> |
      <a href="/legal-disclosure.html">Legal Disclosure</a> |
      <a href="https://github.com/SAP-docs/preview.developer.concur.com/blob/main/src/api-guides/ess-guide.markdown">Edit this page on GitHub</a>
    </p>
  </div>

  <!-- Social Links -->
  <div class="col-md-4 footer-social">
    <ul class="list-inline social-icons">
      <li>
        <a href="https://www.facebook.com/SAPConcur"
           target="_blank">
          <span class="sr-only">Facebook</span>
          <span class="fa-stack fa-lg">
            <i class="fas fa-circle fa-stack-2x"></i>
            <i class="fab fa-facebook-f fa-stack-1x fa-inverse"></i>
          </span>
        </a>
      </li>
      <li>
        <a href="https://www.linkedin.com/company/5822"
           target="_blank">
          <span class="sr-only">LinkedIn</span>
          <span class="fa-stack fa-lg">
            <i class="fas fa-circle fa-stack-2x"></i>
            <i class="fab fa-linkedin-in fa-stack-1x fa-inverse"></i>
          </span>
        </a>
      </li>
      <li>
        <a href="https://twitter.com/sapconcur"
           target="_blank">
          <span class="sr-only">Twitter</span>
          <span class="fa-stack fa-lg">
            <i class="fas fa-circle fa-stack-2x"></i>
            <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
          </span>
        </a>
      </li>
      <li>
        <a href="https://www.youtube.com/playlist?list=PLLNSVdjqNPVseaDkR5hSF4CDjnlLK7_nq"
           target="_blank">
          <span class="sr-only">Youtube</span>
          <span class="fa-stack fa-lg">
            <i class="fas fa-circle fa-stack-2x"></i>
            <i class="fab fa-youtube fa-stack-1x fa-inverse"></i>
          </span>
        </a>
      </li>
    </ul>
  </div>
  <!-- End Social Links -->
</footer>
<!--/.footer-->

  </div>
  <!--/wrapper-->

  <!-- JS Global Compulsory -->
<script type="text/javascript" src="/assets/plugins/jquery/jquery.min.js"></script>
<script type="text/javascript" src="/assets/plugins/jquery/jquery-migrate.min.js"></script>
<script type="text/javascript" src="/assets/plugins/bootstrap/js/bootstrap.min.js"></script>

<!-- Adobe Analytics Global-->
<script src="https://assets.adobedtm.com/e1226b306979/aeb854337dc8/launch-85c98625c1e8.min.js" async></script>

<!-- Swagger -->
<!-- <script src="/swagger-ui/lib/jquery-1.8.0.min.js" type="text/javascript"></script> -->



<script>
  var replacementURL = "preview.developer.concur.com/api-explorer-proxy";
</script>



<!-- JS Implementing Plugins -->
<script type="text/javascript" src="/assets/plugins/back-to-top.js"></script>
<!-- JS Page Level -->
<script type="text/javascript" src="/assets/js/app.js"></script>
<script type="text/javascript">
  jQuery(document).ready(function() {
    App.init();
  });
</script>

<script>
  var oHeader = document.getElementById("header-navbar");
  var oContent = document.getElementById("main-content");
  var oFooter = document.getElementById("footer");

  // Set content overall height
  var iNewHeight = oContent.offsetHeight - (oHeader.offsetHeight + oFooter.offsetHeight);
  var sHeight = "" + iNewHeight + "px";
  oContent.style.height = sHeight;

  // Set Triple component heights.
  // var oBreadcrumb = document.getElementById("breadcrumbs");
  var oLeftNav = document.getElementById("left-navigation");
  var oMDContent = document.getElementById("markdown-body");
  var oMDToc = document.getElementById("markdown-toc");
  var iViewWidth = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0)

  // Widths are 2-8-2 or 2-10 if no MDToc
  var sWidth;
  if (iViewWidth < 989) {
    if (!!oLeftNav) {
      oLeftNav.style.height = 100;
      sWidth = "" + (window.innerWidth * 0.950) + "px";
      oLeftNav.style.maxWidth = sWidth;
    }
  } else {
    if (!!oLeftNav) {
      oLeftNav.style.height = sHeight;
      sWidth = "" + (window.innerWidth * 0.166) + "px";
      oLeftNav.style.maxWidth = sWidth;
    }
    if (!!oMDContent) {
      oMDContent.style.height = sHeight;
      if (!!oMDToc) {
        // 8 / 12
        sWidth = "" + (window.innerWidth *0.66) + "px";
        oMDContent.style.maxWidth = sWidth;
      } else {
        // 10 / 12
        oMDContent.style.maxWidth = window.innerWidth * 0.833;
        sWidth = "" + (window.innerWidth * 0.833) + "px";
        oMDContent.style.maxWidth = sWidth;
      }
    }
    if (!!oMDToc) {
      oMDToc.style.height = sHeight;
      sWidth = "" + (window.innerWidth * 0.166) + "px";
      oMDToc.style.maxWidth = sWidth;
    }
  }
</script>


</body>

</html>
