<!DOCTYPE html>
<html lang="en">

<head>
  


  <title> SAP Concur Developer Center | Cost Object Workflow Integration Guide</title>


<!-- Meta -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="The starting point for anyone interested in integrating with the SAP Concur platform that reaches 80 million end users.">
<meta name="author" content="">

<!-- Sitemap link -->
<link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml" />

<!-- Favicon -->
<link rel="shortcut icon" href="/assets/img/square-sap-favicon.png" type="image/png">

<!-- Adobe Analytics Global-->
<script src="https://assets.adobedtm.com/e1226b306979/aeb854337dc8/launch-85c98625c1e8.min.js" async></script>

<!-- Canonical link-->
<link rel="canonical" href="https://preview.developer.concur.com/api-guides/expense/cost-object-workflow-integration.html" data-proofer-ignore>

<!-- CSS Global Compulsory -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400">
<link rel="stylesheet" href="/assets/style.css">

<!-- CSS Implementing Plugins -->
<link rel="stylesheet" href="/assets/plugins/font-awesome/css/all.min.css">



<link rel="alternate" type="application/rss+xml" title="SAP Concur Developer Center RSS" href="/feed.xml" />

</head>

<body>


  <div class="wrapper page-option-v1">
    <div class="hidden-print">
  <nav id="header-navbar" class="navbar navbar-inverse hidden-print">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header col-6">
        <button type="button" class="navbar-toggle collapsed" style="color: white" data-toggle="collapse" data-target="#nav-collapse-1" aria-expanded="false">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/">
          <img src="/assets/img/sap-concur-logo-white.png" alt="Logo">
          <div class="app-name">Developer Center</div>
        </a>
      </div>
      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse col-6" id="nav-collapse-1">
        <ul class="nav navbar-nav navbar-right" style="padding-top: 9px">
          <!-- Development -->
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" style="color: white" role="button" aria-haspopup="true">
              Development <span class="caret"></span>
            </a>
            <ul class="dropdown-menu multi-column three-column-menu">
              <div class="row">
                <div class="col-sm-4">
                  <ul class="multi-column-dropdown">
                    <li class="column-icon">
                      <span class="fa-stack fa-lg">
                        <i class="fas fa-circle fa-stack-2x"></i>
                        <i class="fas fa-map-marked-alt fa-stack-1x fa-inverse"></i>
                      </span>
                    </li>
                    <li class="column-title">About</li>
                    <li><a href="/getting-started.html">Getting Started</a></li>
                    <li><a href="/api-reference/authentication/getting-started.html">Authentication</a></li>
                    <li><a href="/platform/index.html">Platform</a></li>
                    <li><a href="/tools-support/deprecation-policy.html">API Deprecation</a></li>
                  </ul>
                </div>
                <div class="col-sm-4">
                  <ul class="multi-column-dropdown">
                    <li class="column-icon">
                      <span class="fa-stack fa-lg">
                        <i class="fas fa-circle fa-stack-2x"></i>
                        <i class="fas fa-book fa-stack-1x fa-inverse"></i>
                      </span>
                    </li>
                    <li class="column-title">Documentation</li>
                    <li><a href="/api-reference/">API Reference</a></li>
                    <li><a href="/api-explorer/">API Explorer</a></li>
                    <li><a href="/api-guides/">API Guides</a></li>
                    <li><a href="/event-topics/">Event Topics</a></li>
                  </ul>
                </div>
                <div class="col-sm-4">
                  <ul class="multi-column-dropdown">
                    <li class="column-icon">
                      <span class="fa-stack fa-lg">
                        <i class="fas fa-circle fa-stack-2x"></i>
                        <i class="fas fa-clipboard-list fa-stack-1x fa-inverse"></i>
                      </span>
                    </li>
                    <li class="column-title">UX Guidelines</li>
                    <li><a href="/manage-apps/go-market-docs/app-center-ux-guidelines-enterprise.html">Enterprise Applications</a></li>
                    <li><a href="/manage-apps/go-market-docs/app-center-ux-guidelines-consumer.html">User Connections</a>
                    </li>
                  </ul>
                </div>
              </div>
            </ul>
          </li>
          <!-- Partner Resources -->
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" style="color: white" aria-haspopup="true" aria-expanded="false">
              Partner Resources <span class="caret"></span>
            </a>
            <ul class="dropdown-menu">
              <li class="column-icon">
                <span class="fa-stack fa-lg">
                  <i class="fas fa-circle fa-stack-2x"></i>
                  <i class="fas fa-lightbulb fa-stack-1x fa-inverse"></i>
                </span>
              </li>
              <li class="column-title">Partner Resources</li>
              <li><a href="/manage-apps/app-certification.html">App Certification</a></li>
              <li><a href="/manage-apps/partner-applications.html">App Registration & Management</a></li>
              <li><a href="https://www.concur.com/en-us/app-center" target="_blank">App Center</a></li>
              <li><a href="https://www.concursolutions.com/" target="_blank">Login to Concur</a></li>
            </ul>
          </li>
          <!-- Support -->
          <li
            class="dropdown">
            <a href="#" class="dropdown-toggle" style="color: white" data-toggle="dropdown" role="button" aria-haspopup="true">
              Support <span class="caret"></span>
            </a>
            <ul class="dropdown-menu multi-column two-column-menu">
              <div class="row">
                <div class="col-sm-6">
                  <ul class="multi-column-dropdown">
                    <li class="column-icon">
                      <span class="fa-stack fa-lg">
                        <i class="fas fa-circle fa-stack-2x"></i>
                        <i class="fas fa-question fa-stack-1x fa-inverse"></i>
                      </span>
                    </li>
                    <li class="column-title">Support</li>
                    <li><a href="/tools-support/support.html">Support Options</a></li>
                    <li><a href="https://open.concur.com/" target="_blank">Service Status</a></li>
                  </ul>
                </div>
                <div class="col-sm-6">
                  <ul class="multi-column-dropdown">
                    <li class="column-icon">
                      <span class="fa-stack fa-lg">
                        <i class="fas fa-circle fa-stack-2x"></i>
                        <i class="fas fa-bullhorn fa-stack-1x fa-inverse"></i>
                      </span>
                    </li>
                    <li class="column-title">Bulletin</li>
                    <li><a href="/tools-support/release-notes/index.html">Release Notes</a></li>
                  </ul>
                </div>
              </div>
            </ul>
          </li>
          <!-- Search -->
          <li>
            <a href="#" class="search">
              <span class="sr-only">Search</span>
              <i class="fas fa-search search-btn" style="color:white;"></i>
            </a>
            <div class="search-open">
              <div class="input-group animated fadeInDown">
                <form method="GET" action="/search.html" id="searchbox_000165422556797149853:qlbg8re_3tu">
                  <input value="000165422556797149853:qlbg8re_3tu" name="cx" type="hidden">
                  <input value="FORID:11" name="cof" type="hidden"> <!-- FORID values configure ad positions -->
                  <div class="input-group">
                    <label for="q" hidden>Search</label>
                    <input type="text" id="q" class="form-control" name="q" placeholder="Search">
                    <span class="input-group-btn">
                      <button type="submit" class="btn bright-blue">Go</button>
                    </span>
                  </div>
                </form>
              </div>
            </div>
          </li>
        </ul> <!-- /.navbar-nav -->
      </div> <!-- /.navbar-collapse -->
  </nav> <!-- /.navbar -->
</div>


    <div id="main-content"
         class="main-content">
      <div class="container-fluid content">
  <div class="row">
    <div id="left-navigation"
         class="col-md-2 left-navigation">
      







<ul class="list-group sidebar-nav-v1 hidden-print" id="sidebar-nav">





  
    <li class="list-group-item ">
      <a href="/api-guides/">Integration Guides</a>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-attendees">
        Attendees
      </a>
      <ul id="collapse-attendees" class="collapse ">
        
          <li >
            <a href="/api-guides/attendees/external-attendees-to-expense-entries.html">Expense - Associating External Attendees to Expense Entries</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-authentication">
        Authentication
      </a>
      <ul id="collapse-authentication" class="collapse ">
        
          <li >
            <a href="/api-guides/authentication/concur-get-refresh-token/concur-get-refresh-token.html">Tutorial 1. Create Tokens Required for SAP Concur API Access</a>
          </li>
        
          <li >
            <a href="/api-guides/authentication/concur-refresh-token-management/concur-refresh-token-management.html">Tutorial 2. Refresh Token Management Automation</a>
          </li>
        
          <li >
            <a href="/api-guides/authentication/concur-calling-apis/concur-calling-apis.html">Tutorial 3. Call SAP Concur APIs Using A Multiple Use Bearer Token</a>
          </li>
        
      </ul>
    </li>

  



  
    <li class="list-group-item ">
      <a href="/api-guides/e-receipts.html">eReceipts Integration</a>
    </li>

  



  
    <li class="list-group-item ">
      <a href="/api-guides/ess-guide.html">Event Subscription Service v4 Guide</a>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle active">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-expense">
        Expense
      </a>
      <ul id="collapse-expense" class="collapse in">
        
          <li  class="active" >
            <a href="/api-guides/expense/cost-object-workflow-integration.html">Cost Object Workflow Integration</a>
          </li>
        
          <li >
            <a href="/api-guides/expense/deeplink-url.html">Deeplink URL</a>
          </li>
        
          <li >
            <a href="/api-guides/expense/mexico-cfdi-integration.html">Mexico CFDI Integration Guide</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-erp-integration">
        ERP Integration
      </a>
      <ul id="collapse-erp-integration" class="collapse ">
        
          <li >
            <a href="/api-guides/ERP-integration/erp-integration.html">ERP Integrations</a>
          </li>
        
          <li >
            <a href="/api-guides/ERP-integration/posting-via-financial-integration-service.html">Financial Posting via Financial Integration Service</a>
          </li>
        
          <li >
            <a href="/api-guides/ERP-integration/posting-via-extracts.html">Financial Posting via Extracts</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-invoice">
        Invoice
      </a>
      <ul id="collapse-invoice" class="collapse ">
        
          <li >
            <a href="/api-guides/invoice/payment-provider-integration.html">Payment Provider Integration - paying customers' invoices</a>
          </li>
        
      </ul>
    </li>

  



  
    <li class="list-group-item ">
      <a href="/api-guides/preproduction-testing.html">Testing App Center Partner Applications</a>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-profile">
        Profile
      </a>
      <ul id="collapse-profile" class="collapse ">
        
          <li >
            <a href="/api-guides/profile/identity-search.html">Identity v4.1 Search Guide</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-request">
        Request
      </a>
      <ul id="collapse-request" class="collapse ">
        
          <li >
            <a href="/api-guides/request/deeplink-url-request.html">Deeplink URL Integration</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-tmc">
        TMC
      </a>
      <ul id="collapse-tmc" class="collapse ">
        
          <li >
            <a href="/api-guides/tmc/tmc-overview.html">TMC Guide Overview</a>
          </li>
        
          <li >
            <a href="/api-guides/tmc/itinerary-v1-guide.html">Guide to the Itinerary v1.0 API, TMC Edition</a>
          </li>
        
          <li >
            <a href="/api-guides/tmc/profile-v2-guide.html">Guide to the Profile v2.0 API, TMC Edition</a>
          </li>
        
          <li >
            <a href="/api-guides/tmc/receipts-v4-guide.html">Guide to the Receipts v4.0 API, TMC Edition</a>
          </li>
        
          <li >
            <a href="/api-guides/tmc/request-v4-guide.html">Guide to the Request v4.0 API, TMC Edition</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-travel">
        Travel
      </a>
      <ul id="collapse-travel" class="collapse ">
        
          <li >
            <a href="/api-guides/travel/deeplink-integration.html">Deep Link Integration</a>
          </li>
        
          <li >
            <a href="/api-guides/travel/duty-of-care.html">Duty of Care</a>
          </li>
        
          <li >
            <a href="/api-guides/travel/get-itinerary.html">Itinerary - GET Itinerary & Trip Details</a>
          </li>
        
          <li >
            <a href="/api-guides/travel/new-itinerary-manual.html">Itinerary - Add a New Itinerary Manually</a>
          </li>
        
          <li >
            <a href="/api-guides/travel/itin-with-events.html">Itinerary - Business Travel Events</a>
          </li>
        
      </ul>
    </li>

  



  

    

    

    

    <li class="list-group-item list-toggle ">
      <a data-toggle="collapse" data-parent="#sidebar-nav" href="#collapse-user-provisioning">
        User Provisioning
      </a>
      <ul id="collapse-user-provisioning" class="collapse ">
        
          <li >
            <a href="/api-guides/user-provisioning/user-provisioning.html">User Provisioning</a>
          </li>
        
      </ul>
    </li>

  



  
    <li class="list-group-item ">
      <a href="/api-guides/vat-reclaim/vat-reclaim-guide.html">VAT Reclaim Integration</a>
    </li>

  



</ul>

    </div>
    <!--/col-md-3-->

    
      <div id="markdown-body"
           class="col-md-8 markdown-body">
        

        <h1 id="cost-object-workflow-integration-guide">Cost Object Workflow Integration Guide</h1>

<p>The cost object approval function of Workflow v4 provides the ability for a user to create a workflow within their own external system or portal. Users can retrieve, view, and approve cost objects within reports through those systems, and deep link into  SAP Concur related systems for detailed information. Users are also able to receive necessary notifications regarding pending actions and workflow steps. This system can be used with both Expense and Request.</p>

<h2 id="overall-workflow-for-expense-and-request">Overall WorkFlow for Expense and Request</h2>

<p>It provides three core functions:</p>

<ul>
  <li>Event notifications when Requests/Expenses have entered cost object approval workflow steps.</li>
  <li>Expense/Request workflow APIs that enable portal to retrieve Expenses/Requests that are ready for approvers and delegates to approve, review key cost object approval-related details, and approve and send back with or without comments to the employee.</li>
  <li>Approver can deeplink from a given Expense or Request back into Concur Expense if the approver wants to view more detail.</li>
</ul>

<p><img src="./cost-object-workflow1.png" alt="Cost Object Approval Workflow Overview Diagram" /></p>

<h3 id="general-prerequisites">General Prerequisites</h3>

<ul>
  <li>The user must already exist as an active user in the SAP Concur solution with a Concur Expense or Request role.</li>
  <li>This event subscription is only available to partners who have been granted access by SAP Concur.</li>
</ul>

<p>Scopes required for Event Subscription Service:</p>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">events.topic.read</code></td>
      <td>Access to ESS API.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">expense.report.read</code></td>
      <td>Get information about expense reports.</td>
    </tr>
  </tbody>
</table>

<p>Scopes required for <a href="/api-reference/expense/expense-report/v4.reports.html">Reports &amp; Expense V4</a></p>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Endpoint</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">expense.report.read</code></td>
      <td>Get information about expense reports.</td>
      <td>GET</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">expense.report.readwrite</code></td>
      <td>Read and write expense report headers.</td>
      <td>PATCH</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">expense.report.workflowstatus.write</code></td>
      <td>Approve or Send Back the Report in the workflow.</td>
      <td>PATCH</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">user.read</code></td>
      <td>Get User Information, necessary for <code class="language-plaintext highlighter-rouge">userID</code>.</td>
      <td>GET</td>
    </tr>
  </tbody>
</table>

<p>Optional Scopes:</p>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Endpoint</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">spend.listitem.read</code></td>
      <td>Read only access to spend list items <code class="language-plaintext highlighter-rouge">listItemId</code>.</td>
      <td>GET</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">spend.list.read</code></td>
      <td>Read only access to spend list and category details.</td>
      <td>GET</td>
    </tr>
  </tbody>
</table>

<p>Scopes required for <a href="/api-guides/expense/deeplink-url.html#scope-usage">Deeplink URL Integration</a></p>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Endpoint</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">expense.report.read</code></td>
      <td>Get information about expense reports.</td>
      <td>GET</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">expense.report.readwrite</code></td>
      <td>Read and write expense report headers.</td>
      <td>PATCH</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">user.read</code></td>
      <td>Get user information, necessary for <code class="language-plaintext highlighter-rouge">userID</code>.</td>
      <td>GET</td>
    </tr>
  </tbody>
</table>

<h2 id="solution-steps-for-expense">Solution Steps for Expense</h2>

<ol>
  <li>Portal system subscribes to an <strong>Enhanced Expense <a href="/event-topics/expense/v4.expense-events.html">Event Topic</a> from ESS that sends a unique event for every Cost Object Approval Approver and every approval step,</strong> including cost object approval workflow events
    <ul>
      <li>When the report enters a cost object step that has multiple sub-branches, it will generate a single event consisting of multiple step instances.</li>
      <li>When the report is moving within a cost object sub-branch it will generate a single event with one step instances.</li>
      <li>ESS Expense Event would include a new <code class="language-plaintext highlighter-rouge">assignedUserId</code> field in the Status Changed Facts Schema.</li>
      <li>Portal can also optionally listen to subsequent status change events (<code class="language-plaintext highlighter-rouge">eventType=statusChanged</code>) to further notify users after item has entered cost object approval workflow. For example, in case an item has been recalled (<code class="language-plaintext highlighter-rouge">A_RESU</code>), could post an additional notification to those users.</li>
      <li>Reference: <a href="https://www.concurtraining.com/customers/tech_pubs/Docs/_Current/SG_Exp/Exp_SG_Workflow_COA.pdf">See Concur Expense: Workflow – Cost Object Approval Setup Guide</a> and <a href="https://www.concurtraining.com/customers/tech_pubs/Docs/_Current/SG_Req/Req_SG_Workflow-COA.pdf">Concur Request: Cost Object Approval Setup Guide</a> for detail on cost object approval workflow steps. In the examples in Section 4 of both guides, Dave/Cindy/Finn would each receive a notification event when the Report/Request first enters cost object approval workflow.</li>
    </ul>
  </li>
  <li><strong>Portal system retrieves all delegates’ user IDs from the <a href="/api-reference/profile/v4.identity.html">Identify v4 API</a></strong> for each approver that just received an event notification, and then portal sends a notification to each approver and delegate.
    <ul>
      <li>Portal uses <code class="language-plaintext highlighter-rouge">recipientId</code> obtained in ESS Expense Event to call Identity v4.</li>
      <li>Portal receives back list of delegates for that user from Identity v4 which includes <code class="language-plaintext highlighter-rouge">userId</code> and <code class="language-plaintext highlighter-rouge">employeeNumber</code>.</li>
    </ul>
  </li>
  <li>
    <p>Portal authenticates to SAP Concur system using <a href="/api-reference/authentication/company-auth.html">Company Level Authentication</a> to obtain a Company JWT (token with necessary scopes required for API calls).</p>
  </li>
  <li>
    <p><strong>User authenticates with the SAP Concur system through the portal and authorizes the portal using <a href="api-reference/authentication/apidoc.html#authorization-grant-">Authorization Grant</a></strong> – the User JWT obtained in this step will be used when user approves or sends back an expense (details in Authorization section).</p>
  </li>
  <li>
    <p><strong>Portal retrieves the user’s delegators via Identity v4</strong> that can be used by the portal to then retrieve all the delegators’ requests to approve in the next step.</p>
  </li>
  <li><strong>Portal retrieves latest reports to approve via <a href="/api-reference/expense/expense-report/v4.reports.html#get-reports-to-approve">Get Reports To Approve</a> API which is enhanced to allow retrieval by Delegates.</strong>
    <ul>
      <li><a href="/api-reference/expense/expense-report/v4.reports.html#get-reports-to-approve">Get Reports To Approve</a> endpoint retrieves all reports that a user can approve as either an approver or delegate.</li>
      <li>To retrieve reports pending approval for delegated employees, the parameter <code class="language-plaintext highlighter-rouge">includeDelegateApprovals</code> should be included in the API request as a boolean value. When this parameter is set to true, the API will return the reports that require approval from employees for whom the user has delegated authority.</li>
      <li>If user is a delegate, the portal will iterate through to also retrieve each delegator’s reports to approve – by doing so, the user will have a complete list of all reports to approve.</li>
      <li>This step would work for a user who has logged into the portal, regardless of whether they received a notification event as a user/delegate.</li>
    </ul>
  </li>
  <li><strong>Portal retrieves cost object detail for each report</strong> pending approval.
    <ul>
      <li>The <a href="/api-reference/expense/expense-report/v4.workflows.html">cost objects for approver endpoint</a> retrieves all cost objects for a report that the calling approver and/or that one of their delegators can approve.</li>
      <li>If the workflow setting “Filter expenses to those that are applicable to cost object” is set to false, then this endpoint will return all cost objects related to the report regardless of if the approver has permission to approve them.</li>
    </ul>
  </li>
  <li><strong><a href="api-reference/expense/expense-report/v4.reports-temporary.html#get-reports-to-approve">Approver or delegate user approves or sends back expense with or without comments</a>.</strong>
    <ul>
      <li>Approve function is used to advance the specified report in the workflow and may require additional approvals based on configuration. If the report was in the processing payment status, it will be moved to the paid status. The function requires several parameters, including the unique identifiers of the user, the context type (which determines the user’s access level), and the report itself. Additionally, users can optionally provide the identifier of an adhoc approver or manager to whom the report should be forwarded. The function supports various response codes to indicate the success or failure of the approval process, with corresponding error messages provided in case of any issues.</li>
      <li>The Send Back Report function provides a convenient way to return an expense report to the employee for necessary revisions. By utilizing this function, the report can be sent back to the user in an unsubmitted state, allowing them to make any required changes. Once the user resubmits the report, it will then undergo the complete workflow process once more, ensuring proper review and approval. The request must include the unique identifiers for the user, report, and context type.</li>
      <li>These functions support delegates, validating the delegate’s user JWT and ensuring that the delegate has the right to approve or send back.</li>
    </ul>
  </li>
  <li>A user wanting to review more Expense detail can deeplink from the portal to Concur Expense.
    <ul>
      <li>The <a href="/api-guides/expense/deeplink-url.html">Deeplink URL Integration</a> documentation details how a portal can access a resource in Concur Expense.</li>
      <li>Client would have to implement SAML 2 if using SSO to enable deeplink support.</li>
    </ul>
  </li>
</ol>

<p><img src="./cost-object-workflow2.png" alt="Workflow steps flow diagram" /></p>

<h2 id="validation-and-error-handling">Validation and Error Handling</h2>

<ul>
  <li><strong>Missing Events</strong> – in the case that the portal does not receive events when requests have entered the cost object approval workflow, the portal would still be able to retrieve all requests to approve, review, and act on them.</li>
  <li><strong>Error Codes</strong> – APIs will return common error codes for general outage, document no longer in approval, etc. These will be detailed in API documentation.</li>
  <li><strong>Error Codes – Expense</strong>
    <ul>
      <li><strong>400 Bad Request</strong>: Indicates a problem with the request, such as missing context, incomplete review, invalid action, or missing approver. The error response will provide specific error descriptions.</li>
      <li><strong>401 Unauthorized</strong>: Missing authorization header.</li>
      <li><strong>403 Forbidden</strong>: User is not authorized to read the report.</li>
      <li><strong>404 Not Found</strong>: Report ID not found.</li>
      <li><strong>500 Internal Server Error</strong>: An error occurred on the server.</li>
    </ul>
  </li>
</ul>

<h2 id="authorization-requirements">Authorization Requirements</h2>

<h3 id="user-authentication-and-authorization">User Authentication and Authorization</h3>

<ul>
  <li>The portal will need to use the regular 3-legged OAuth2 grant <a href="/api-reference/authentication/apidoc.html#authorization-grant-">Authorization Grant</a>, which would redirect the user to the SAP Concur login page where they would get asked for a SAP Concur password and email/OTP authentication (SSO not currently available), and then explicitly authorize the portal application.</li>
  <li>If user authentication and authorization is done from a browser (client side app), then the portal would need to use the <a href="https://oauth.net/2/pkce/">PKCE for OAuth 2.0</a> extension, which allows the portal to use the flow without exposing their app’s client secret.</li>
</ul>

<h3 id="company-level-authentication">Company Level Authentication</h3>

<ul>
  <li>The portal application will need to use <a href="api-reference/authentication/company-auth.html">Company Level Authentication</a> to obtain an access token and a refresh token on the Company’s behalf (<a href="/api-reference/authentication/company-refresh-tool.html">Instructions for obtaining Company JWT</a>).</li>
</ul>


      </div>
      <!--/col-md-8-->
      
      <div id="markdown-toc"
           class="col-md-2 markdown-toc">
        <div class="markdown-toc-header">
    <h4>On this page</h4>
</div>
<div class="markdown-toc-content">
</div>

      </div>
      <!--/col-md-1-->
      
    </div>
    <!--/row-->
  </div>
  <!--/container-->

  <!-- TOCBOT -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.11.1/tocbot.min.js"></script>

<script>
  tocbot.init({
    // Where to render the table of contents.
    tocSelector: '.markdown-toc-content',
    // Where to grab the headings to build the table of contents.
    contentSelector: '.markdown-body',
    // Which headings to grab inside of the contentSelector element.
    headingSelector: 'h1, h2',
    // For headings inside relative or absolute positioned containers within content.
    hasInnerContainers: false,
  });
</script>


    </div>

    <footer class="hidden-print"
        id="footer">
  <div class="col-md-8 footer-copyright">
    <p>
      &copy;
      <script type="text/javascript">
        document.write(new Date().getFullYear());
      </script>
      All Rights Reserved.
      <a href="https://www.concur.com/en-us/privacy-policy">Privacy Policy</a> |
      <a href="/terms-of-use-2021.html">Terms of Use</a> |
      <a href="/tools-support/deprecation-policy.html">API Deprecation Policy</a> |
      <a href="/legal-disclosure.html">Legal Disclosure</a> |
      <a href="https://github.com/SAP-docs/preview.developer.concur.com/blob/main/src/api-guides/expense/cost-object-workflow-integration.md">Edit this page on GitHub</a>
    </p>
  </div>

  <!-- Social Links -->
  <div class="col-md-4 footer-social">
    <ul class="list-inline social-icons">
      <li>
        <a href="https://www.facebook.com/SAPConcur"
           target="_blank">
          <span class="sr-only">Facebook</span>
          <span class="fa-stack fa-lg">
            <i class="fas fa-circle fa-stack-2x"></i>
            <i class="fab fa-facebook-f fa-stack-1x fa-inverse"></i>
          </span>
        </a>
      </li>
      <li>
        <a href="https://www.linkedin.com/company/5822"
           target="_blank">
          <span class="sr-only">LinkedIn</span>
          <span class="fa-stack fa-lg">
            <i class="fas fa-circle fa-stack-2x"></i>
            <i class="fab fa-linkedin-in fa-stack-1x fa-inverse"></i>
          </span>
        </a>
      </li>
      <li>
        <a href="https://twitter.com/sapconcur"
           target="_blank">
          <span class="sr-only">Twitter</span>
          <span class="fa-stack fa-lg">
            <i class="fas fa-circle fa-stack-2x"></i>
            <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
          </span>
        </a>
      </li>
      <li>
        <a href="https://www.youtube.com/playlist?list=PLLNSVdjqNPVseaDkR5hSF4CDjnlLK7_nq"
           target="_blank">
          <span class="sr-only">Youtube</span>
          <span class="fa-stack fa-lg">
            <i class="fas fa-circle fa-stack-2x"></i>
            <i class="fab fa-youtube fa-stack-1x fa-inverse"></i>
          </span>
        </a>
      </li>
    </ul>
  </div>
  <!-- End Social Links -->
</footer>
<!--/.footer-->

  </div>
  <!--/wrapper-->

  <!-- JS Global Compulsory -->
<script type="text/javascript" src="/assets/plugins/jquery/jquery.min.js"></script>
<script type="text/javascript" src="/assets/plugins/jquery/jquery-migrate.min.js"></script>
<script type="text/javascript" src="/assets/plugins/bootstrap/js/bootstrap.min.js"></script>

<!-- Adobe Analytics Global-->
<script src="https://assets.adobedtm.com/e1226b306979/aeb854337dc8/launch-85c98625c1e8.min.js" async></script>

<!-- Swagger -->
<!-- <script src="/swagger-ui/lib/jquery-1.8.0.min.js" type="text/javascript"></script> -->



<script>
  var replacementURL = "preview.developer.concur.com/api-explorer-proxy";
</script>



<!-- JS Implementing Plugins -->
<script type="text/javascript" src="/assets/plugins/back-to-top.js"></script>
<!-- JS Page Level -->
<script type="text/javascript" src="/assets/js/app.js"></script>
<script type="text/javascript">
  jQuery(document).ready(function() {
    App.init();
  });
</script>

<script>
  var oHeader = document.getElementById("header-navbar");
  var oContent = document.getElementById("main-content");
  var oFooter = document.getElementById("footer");

  // Set content overall height
  var iNewHeight = oContent.offsetHeight - (oHeader.offsetHeight + oFooter.offsetHeight);
  var sHeight = "" + iNewHeight + "px";
  oContent.style.height = sHeight;

  // Set Triple component heights.
  // var oBreadcrumb = document.getElementById("breadcrumbs");
  var oLeftNav = document.getElementById("left-navigation");
  var oMDContent = document.getElementById("markdown-body");
  var oMDToc = document.getElementById("markdown-toc");
  var iViewWidth = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0)

  // Widths are 2-8-2 or 2-10 if no MDToc
  var sWidth;
  if (iViewWidth < 989) {
    if (!!oLeftNav) {
      oLeftNav.style.height = 100;
      sWidth = "" + (window.innerWidth * 0.950) + "px";
      oLeftNav.style.maxWidth = sWidth;
    }
  } else {
    if (!!oLeftNav) {
      oLeftNav.style.height = sHeight;
      sWidth = "" + (window.innerWidth * 0.166) + "px";
      oLeftNav.style.maxWidth = sWidth;
    }
    if (!!oMDContent) {
      oMDContent.style.height = sHeight;
      if (!!oMDToc) {
        // 8 / 12
        sWidth = "" + (window.innerWidth *0.66) + "px";
        oMDContent.style.maxWidth = sWidth;
      } else {
        // 10 / 12
        oMDContent.style.maxWidth = window.innerWidth * 0.833;
        sWidth = "" + (window.innerWidth * 0.833) + "px";
        oMDContent.style.maxWidth = sWidth;
      }
    }
    if (!!oMDToc) {
      oMDToc.style.height = sHeight;
      sWidth = "" + (window.innerWidth * 0.166) + "px";
      oMDToc.style.maxWidth = sWidth;
    }
  }
</script>


</body>

</html>
