{
    "swagger": "2.0",
    "info": {
        "version": "4.0",
        "description": "External partners can use this API to submit alert payloads to SAP Concur products. They can send notifications that will be displayed to users within the Concur ecosystem.",
        "title": "Maestro",
        "contact": {
            "email": "clientplatformservices@sap.com"
        }
    },
    "servers": [
        {
            "url": "https://{region}.api.concursolutions.com/maestro/v4",
            "description": "Concur API",
            "variables": {
                "region": {
                    "description": "The region of the API endpoint",
                    "default": "us"
                }
            }
        }
    ],
    "security": [
        {
            "ApiKeyAuth": []
        }
    ],
    "paths": {
        "/alerts": {
            "post": {
                "operationId": "alerts.create",
                "summary": "Submit Partner Alert",
                "description": "Accepts alert payloads from external partners, validates and transforms the data, then persists the alert and triggers downstream processes.",
                "requestBody": {
                    "description": "Alert payload",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/AlertRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Alert processed successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/AlertResponse"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorMessage"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorMessage"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorMessage"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorMessage"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorMessage"
                                }
                            }
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorMessage"
                                }
                            }
                        }
                    },
                    "504": {
                        "description": "Gateway Timeout",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorMessage"
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Alerts"
                ]
            },
            "put": {
                "operationId": "alerts.update",
                "summary": "Edit Partner Alert",
                "description": "Updates an existing alert with new payload data. Uses the same payload structure as the POST endpoint. The alert must exist and be associated with the requesting partner's company.",
                "requestBody": {
                    "description": "Alert payload",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/AlertRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Alert updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/AlertResponse"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorMessage"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorMessage"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorMessage"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Alert doesn't exist or is not associated with your company",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorMessage"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorMessage"
                                }
                            }
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorMessage"
                                }
                            }
                        }
                    },
                    "504": {
                        "description": "Gateway Timeout",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorMessage"
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Alerts"
                ]
            }
        }
    },
    "components": {
        "securitySchemes": {
            "ApiKeyAuth": {
                "type": "apiKey",
                "in": "header",
                "name": "Authorization",
                "description": "Bearer Company JWT Token"
            }
        },
        "schemas": {
            "AlertRequest": {
                "type": "object",
                "properties": {
                    "extRef": {
                        "type": "string",
                        "description": "External reference identifier"
                    },
                    "userId": {
                        "type": "string",
                        "description": "User identifier"
                    },
                    "companyId": {
                        "type": "string",
                        "description": "Company identifier (only if not part of JWT)"
                    },
                    "createdAt": {
                        "type": "string",
                        "format": "date-time",
                        "description": "ISO date string"
                    },
                    "metadata": {
                        "type": "object",
                        "description": "Metadata object containing partner and package information",
                        "properties": {
                            "partnerProvider": {
                                "type": "string",
                                "description": "Partner provider name (e.g., \"Groundspan\")"
                            },
                            "partnerLogoUrl": {
                                "type": "string",
                                "format": "uri",
                                "description": "Partner logo URL (must be from groundspan.com or concur.com domain)",
                                "pattern": "^https://(.*\\.)?(?:groundspan\\.com|concur\\.com)(/.*)?$"
                            },
                            "partnerAccessibilityTextPrompt": {
                                "type": "string",
                                "description": "Accessibility text for the partner logo"
                            },
                            "packages": {
                                "type": "array",
                                "description": "Array of package objects",
                                "items": {
                                    "$ref": "#/components/schemas/Package"
                                }
                            }
                        },
                        "required": [
                            "partnerProvider",
                            "partnerLogoUrl",
                            "partnerAccessibilityTextPrompt",
                            "packages"
                        ]
                    },
                    "templateId": {
                        "type": "string",
                        "description": "Template identifier"
                    },
                    "msgType": {
                        "type": "string",
                        "description": "Message type (can be empty string for Groundspan)"
                    },
                    "expiresAt": {
                        "type": "string",
                        "format": "date-time",
                        "description": "ISO date string"
                    }
                },
                "required": [
                    "extRef",
                    "userId",
                    "createdAt",
                    "metadata",
                    "templateId",
                    "msgType",
                    "expiresAt"
                ]
            },
            "AlertResponse": {
                "type": "object",
                "properties": {
                    "alertId": {
                        "type": "string",
                        "description": "Unique identifier of the created alert"
                    },
                    "status": {
                        "type": "string",
                        "description": "Processing status (e.g., 'received', 'updated')"
                    },
                    "message": {
                        "type": "string",
                        "description": "Success message"
                    }
                }
            },
            "Package": {
                "type": "object",
                "properties": {
                    "packageId": {
                        "type": "string",
                        "description": "Unique package identifier"
                    },
                    "packageTitle": {
                        "type": "string",
                        "description": "Package title"
                    },
                    "travelDate": {
                        "type": "string",
                        "format": "date",
                        "description": "Travel date (ISO format)"
                    },
                    "location": {
                        "$ref": "#/components/schemas/Location"
                    },
                    "variants": {
                        "type": "array",
                        "description": "Array of variant objects",
                        "items": {
                            "$ref": "#/components/schemas/Variant"
                        }
                    },
                    "offerData": {
                        "type": "array",
                        "description": "Array of offer data",
                        "items": {
                            "type": "object"
                        }
                    }
                },
                "required": [
                    "packageId"
                ]
            },
            "Variant": {
                "type": "object",
                "properties": {
                    "variantTitle": {
                        "type": "string",
                        "description": "Variant title"
                    },
                    "variantId": {
                        "type": "string",
                        "description": "Unique variant identifier"
                    },
                    "variantDesc": {
                        "type": "string",
                        "description": "Variant description"
                    },
                    "variantProvider": {
                        "type": "string",
                        "description": "Variant provider name"
                    },
                    "variantLogoUrl": {
                        "type": "string",
                        "format": "uri",
                        "description": "Variant logo URL (must be from groundspan.com or concur.com domain)",
                        "pattern": "^https://(.*\\.)?(?:groundspan\\.com|concur\\.com)(/.*)?$"
                    },
                    "variantAccessibilityTextPrompt": {
                        "type": "string",
                        "description": "Accessibility text for the variant logo"
                    },
                    "variantStartDate": {
                        "type": "string",
                        "format": "date-time",
                        "description": "Variant start date (ISO format)"
                    },
                    "variantEndDate": {
                        "type": "string",
                        "format": "date-time",
                        "description": "Variant end date (ISO format)"
                    },
                    "price": {
                        "$ref": "#/components/schemas/Price"
                    },
                    "userActions": {
                        "$ref": "#/components/schemas/UserAction"
                    }
                },
                "required": [
                    "variantTitle",
                    "variantId",
                    "variantDesc",
                    "variantProvider",
                    "variantLogoUrl",
                    "variantAccessibilityTextPrompt",
                    "userActions"
                ]
            },
            "Location": {
                "type": "object",
                "properties": {
                    "origin": {
                        "type": "string",
                        "description": "Origin location (can be empty string)"
                    },
                    "destination": {
                        "type": "string",
                        "description": "Destination location (can be empty string)"
                    }
                },
                "required": [
                    "origin",
                    "destination"
                ]
            },
            "Price": {
                "type": "object",
                "properties": {
                    "amount": {
                        "type": "number",
                        "description": "Price amount"
                    },
                    "currency": {
                        "type": "string",
                        "description": "Currency code (can be empty string)"
                    }
                },
                "required": [
                    "amount",
                    "currency"
                ]
            },
            "UserAction": {
                "type": "object",
                "properties": {
                    "label": {
                        "type": "string",
                        "description": "Action button label"
                    },
                    "href": {
                        "type": "string",
                        "format": "uri",
                        "description": "Action URL (must be from groundspan.com or concur.com domain)",
                        "pattern": "^https://(.*\\.)?(?:groundspan\\.com|concur\\.com)(/.*)?$"
                    }
                },
                "required": [
                    "label",
                    "href"
                ]
            },
            "ErrorMessage": {
                "type": "object",
                "properties": {
                    "errors": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Error"
                        }
                    }
                }
            },
            "Error": {
                "type": "object",
                "properties": {
                    "errorCode": {
                        "type": "string",
                        "description": "Error code identifier"
                    },
                    "errorMessage": {
                        "type": "string",
                        "description": "Detailed error message"
                    },
                    "details": {
                        "type": "object",
                        "description": "Optional field-specific information"
                    }
                }
            }
        }
    },
    "x-sap-shortText": "Allows partners to submit alerts"
}
